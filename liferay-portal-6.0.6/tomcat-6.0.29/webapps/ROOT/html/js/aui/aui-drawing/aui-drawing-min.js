AUI.add("aui-drawing-base",function(O){var q=O.Lang,T=q.isArray,Q=q.isFunction,o=q.isNumber,e=q.isObject,J=q.isString,R=q.isUndefined,Z=O.config.doc,X=O.ColorUtil,B,V=O.UA,f=q.emptyFn,N={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://alloy.liferay.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"AlloyUI",translation:"0 0",width:0,x:0,y:0},p={Q:1,T:1},C={circle:1,ellipse:1,image:1,path:1,rect:1,text:1},b={image:1,text:1},S={circle:1,ellipse:1},l=Math,g=l.max,L=l.min,k=l.pow,Y="drawing",U=/^([^:]*):?([\d\.]*)/,c=/^url\(['"]?([^\)]+?)['"]?\)$/i,P=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,I=/,?([achlmqrstvxz]),?/gi,G=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,j=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,n=/[, ]+/,K=/\s*\-\s*/,M="",d="fill",m=" progid:DXImageTransform.Microsoft",E=" ",i=String.prototype.toLowerCase,W=String.prototype.toUpperCase;var D=O.Component.create({ATTRS:{height:{value:342},width:{value:512},x:{value:null},y:{value:null}},UI_ATTRS:["x","y"],create:function(s){var r=arguments;var A=r[0];if(T(A)){r=r[0];s=B.getConfig(r);var w=new D(s).render();var x=w.createSet();var u;for(var t=0,v=r.length;t<v;t++){u=r[t]||{};if(C.hasOwnProperty(u.type)){x.push(w[u.type]().attr(u));}}return w;}else{if(e(A)&&!(A.nodeName||A instanceof O.Node)){s=A;}else{s=B.getConfig(r);}}return new D(s).render();},NAME:Y,prototype:{CONTENT_TEMPLATE:null,renderUI:function(){var A=this;A.customAttributes={};D.Impl.createCanvas.call(A);},circle:function(s,u,t){var A=this;return D.Impl.createCircle.call(A,s||0,u||0,t||0);},clear:function(){var A=this;return D.Impl.clear.call(A);},createSet:function(r){var A=this;if(arguments.length>1){r=Array.prototype.splice.call(arguments,0,arguments.length);}return new F(r);},ellipse:function(r,u,t,s){var A=this;return D.Impl.createEllipse.call(A,r||0,u||0,t||0,s||0);},image:function(u,r,v,s,t){var A=this;return D.Impl.createImage.call(A,u||"about:blank",r||0,v||0,s||0,t||0);},path:function(r){var A=this;if(J(r)){r=O.substitute.apply(O,arguments);}else{if(!R(r)&&!T(r)){r+=M;}}return D.Impl.createPath.call(A,r);},rect:function(s,z,t,u,v){var A=this;return D.Impl.createRectangle.call(A,s||0,z||0,t||0,u||0,v||0);},remove:function(){var A=this;return D.Impl.remove.call(A);},safari:f,text:function(r,t,s){var A=this;return D.Impl.createText.call(A,r||0,t||0,s||M);},_uiSetX:function(r){var A=this;A.get("boundingBox").setXY([r,A.get("y")]);},_uiSetY:function(r){var A=this;A.get("boundingBox").setXY([A.get("x"),r]);}}});B={getConfig:function(u){var t={};var r=u[0];var A="boundingBox";var w=2;var v=1;var s=-1;if(o(r)){A="x";w=3;v=2;s=1;}t[A]=r;t.height=u[w];t.width=u[v];t.y=u[s];return t;},translate:function(A,s){if(A==null){return{x:this._.tx,y:this._.ty,toString:B.XYToString};}this._.tx+=+A;this._.ty+=+s;switch(this.type){case"circle":case"ellipse":this.attr({cx:+A+this.attrs.cx,cy:+s+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+A+this.attrs.x,y:+s+this.attrs.y});break;case"path":var r=B.pathToRelative(this.attrs.path);r[0][1]+=+A;r[0][2]+=+s;this.attr({path:r});break;}return this;}};D.getColor=function(r){var s=D.getColor.start=D.getColor.start||{h:0,s:1,b:r||0.75};var A=X.hsb2rgb(s.h,s.s,s.b);s.h+=0.075;if(s.h>1){s.h=0;s.s-=0.2;if(s.s<=0){D.getColor.start={h:0,s:1,b:s.b};}}return A.hex;};D.getColor.reset=function(){delete D.start;};B.tear=function(r,A){r==A.top&&(A.top=r.prev);r==A.bottom&&(A.bottom=r.next);r.next&&(r.next.prev=r.prev);r.prev&&(r.prev.next=r.next);};B.toFront=function(r,A){if(A.top===r){return;}B.tear(r,A);r.next=null;r.prev=A.top;A.top.next=r;A.top=r;};B.toBack=function(r,A){if(A.bottom===r){return;}B.tear(r,A);r.next=A.bottom;r.prev=null;A.bottom.prev=r;A.bottom=r;};B.insertAfter=function(s,r,A){B.tear(s,A);r==A.top&&(A.top=s);r.next&&(r.next.prev=s);s.next=r.next;s.prev=r;r.next=s;};B.insertBefore=function(s,r,A){B.tear(s,A);r==A.bottom&&(A.bottom=s);r.prev&&(r.prev.next=s);s.prev=r.prev;r.prev=s;s.next=r;};var H=function(s,r){var A=this;A.createElement.apply(A,arguments);};B.removed=function(A){return function(){throw new Error('AlloyUI: you are calling to method "'+A+'" of removed object');};};B._path2string=function(){return this.join(",").replace(I,"$1");};B.parsePathString=O.cached(function(A){if(!A){return null;}var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var r=[];if(T(A)&&T(A[0])){r=pathClone(A);}if(!r.length){String(A).replace(P,function(u,t,x){var w=[];var v=i.call(t);x.replace(G,function(z,y){y&&w.push(+y);});if(v=="m"&&w.length>2){r.push([t].concat(w.splice(0,2)));v="l";t=t=="m"?"l":"L";}while(w.length>=s[v]){r.push([t].concat(w.splice(0,s[v])));if(!s[v]){break;}}});}r.toString=B._path2string;return r;});B.findDotsAtSegment=function(r,A,AN,AL,z,v,AB,AA,AH){var AF=1-AH;var AE=k(AF,3)*r+k(AF,2)*3*AH*AN+AF*3*AH*AH*z+k(AH,3)*AB;var AC=k(AF,3)*A+k(AF,2)*3*AH*AL+AF*3*AH*AH*v+k(AH,3)*AA;var AJ=r+2*AH*(AN-r)+AH*AH*(z-2*AN+r);var AI=A+2*AH*(AL-A)+AH*AH*(v-2*AL+A);var AM=AN+2*AH*(z-AN)+AH*AH*(AB-2*z+AN);var AK=AL+2*AH*(v-AL)+AH*AH*(AA-2*v+AL);var AG=(1-AH)*r+AH*AN;var AD=(1-AH)*A+AH*AL;var u=(1-AH)*z+AH*AB;var s=(1-AH)*v+AH*AA;var w=(90-l.atan((AJ-AM)/(AI-AK))*180/l.PI);if(AJ>AM||AI<AK){w+=180;}return{x:AE,y:AC,m:{x:AJ,y:AI},n:{x:AM,y:AK},start:{x:AG,y:AD},end:{x:u,y:s},alpha:w};};B.pathDimensions=O.cached(function(AC){if(!AC){return{x:0,y:0,width:0,height:0};}AC=B.path2curve(AC);var AA=0;var z=0;var t=[];var r=[];var s;for(var v=0,u=AC.length;v<u;v++){s=AC[v];if(s[0]=="M"){AA=s[1];z=s[2];t.push(AA);r.push(z);}else{var w=B.curveDim(AA,z,s[1],s[2],s[3],s[4],s[5],s[6]);t=t.concat(w.min.x,w.max.x);r=r.concat(w.min.y,w.max.y);AA=s[5];z=s[6];
}}var A=L.apply(0,t);var AB=L.apply(0,r);return{x:A,y:AB,width:g.apply(0,t)-A,height:g.apply(0,r)-AB};});B.pathClone=function(v){var s=[];if(!T(v)||!T(v&&v[0])){v=B.parsePathString(v);}for(var r=0,u=v.length;r<u;r++){s[r]=[];for(var A=0,t=v[r].length;A<t;A++){s[r][A]=v[r][A];}}s.toString=B._path2string;return s;};B._pathToRelative=O.cached(function(u){if(!T(u)||!T(u&&u[0])){u=B.parsePathString(u);}var AC=[];var AF=0;var AE=0;var AI=0;var AH=0;var s=0;if(u[0][0]=="M"){AF=u[0][1];AE=u[0][2];AI=AF;AH=AE;s++;AC.push(["M",AF,AE]);}for(var AA=s,t=u.length;AA<t;AA++){var A=AC[AA]=[];var AG=u[AA];if(AG[0]!=i.call(AG[0])){A[0]=i.call(AG[0]);switch(A[0]){case"a":A[1]=AG[1];A[2]=AG[2];A[3]=AG[3];A[4]=AG[4];A[5]=AG[5];A[6]=+(AG[6]-AF).toFixed(3);A[7]=+(AG[7]-AE).toFixed(3);break;case"v":A[1]=+(AG[1]-AE).toFixed(3);break;case"m":AI=AG[1];AH=AG[2];default:for(var w=1,AD=AG.length;w<AD;w++){A[w]=+(AG[w]-((w%2)?AF:AE)).toFixed(3);}}}else{A=AC[AA]=[];if(AG[0]=="m"){AI=AG[1]+AF;AH=AG[2]+AE;}for(var v=0,z=AG.length;v<z;v++){AC[AA][v]=AG[v];}}var AB=AC[AA].length;switch(AC[AA][0]){case"z":AF=AI;AE=AH;break;case"h":AF+=+AC[AA][AB-1];break;case"v":AE+=+AC[AA][AB-1];break;default:AF+=+AC[AA][AB-2];AE+=+AC[AA][AB-1];}}AC.toString=B._path2string;return AC;});B.pathToRelative=function(A){return B.pathClone(B._pathToRelative(A));};B._pathToAbsolute=O.cached(function(u){if(!T(u)||!T(u&&u[0])){u=B.parsePathString(u);}var AB=[];var AE=0;var AD=0;var AH=0;var AG=0;var s=0;if(u[0][0]=="M"){AE=+u[0][1];AD=+u[0][2];AH=AE;AG=AD;s++;AB[0]=["M",AE,AD];}for(var AA=s,t=u.length;AA<t;AA++){var A=AB[AA]=[];var AF=u[AA];if(AF[0]!=W.call(AF[0])){A[0]=W.call(AF[0]);switch(A[0]){case"A":A[1]=AF[1];A[2]=AF[2];A[3]=AF[3];A[4]=AF[4];A[5]=AF[5];A[6]=+(AF[6]+AE);A[7]=+(AF[7]+AD);break;case"V":A[1]=+AF[1]+AD;break;case"H":A[1]=+AF[1]+AE;break;case"M":AH=+AF[1]+AE;AG=+AF[2]+AD;default:for(var w=1,AC=AF.length;w<AC;w++){A[w]=+AF[w]+((w%2)?AE:AD);}}}else{for(var v=0,z=AF.length;v<z;v++){AB[AA][v]=AF[v];}}switch(A[0]){case"Z":AE=AH;AD=AG;break;case"H":AE=A[1];break;case"V":AD=A[1];break;case"M":AH=AB[AA][AB[AA].length-2];AG=AB[AA][AB[AA].length-1];default:AE=AB[AA][AB[AA].length-2];AD=AB[AA][AB[AA].length-1];}}AB.toString=B._path2string;return AB;});B.pathToAbsolute=function(A){return B.pathClone(B._pathToAbsolute(A));};B.lineToCubicCurve=function(r,t,A,s){return[r,t,A,s,A,s];};B.quadraticToCubicCurve=function(r,t,w,u,A,s){var v=1/3;var x=2/3;return[v*r+x*w,v*t+x*u,v*A+x*w,v*s+x*u,A,s];};B.arcToCubicCurve=function(AH,Am,AR,AP,AJ,AC,v,AG,Al,AK){var u=l.PI;var AO=u*120/180;var A=u/180*(+AJ||0);var AU=[];var AS;var Ai=O.cached(function(An,Aq,t){var Ap=An*l.cos(t)-Aq*l.sin(t),Ao=An*l.sin(t)+Aq*l.cos(t);return{x:Ap,y:Ao};});if(!AK){AS=Ai(AH,Am,-A);AH=AS.x;Am=AS.y;AS=Ai(AG,Al,-A);AG=AS.x;Al=AS.y;var r=l.cos(u/180*AJ);var AE=l.sin(u/180*AJ);var AW=(AH-AG)/2;var AV=(Am-Al)/2;var Ag=(AW*AW)/(AR*AR)+(AV*AV)/(AP*AP);if(Ag>1){Ag=l.sqrt(Ag);AR=Ag*AR;AP=Ag*AP;}var s=AR*AR;var AZ=AP*AP;var Ab=(AC==v?-1:1)*l.sqrt(l.abs((s*AZ-s*AV*AV-AZ*AW*AW)/(s*AV*AV+AZ*AW*AW)));var AM=Ab*AR*AV/AP+(AH+AG)/2;var AL=Ab*-AP*AW/AR+(Am+Al)/2;var AB=l.asin(((Am-AL)/AP).toFixed(7));var AA=l.asin(((Al-AL)/AP).toFixed(7));AB=AH<AM?u-AB:AB;AA=AG<AM?u-AA:AA;AB<0&&(AB=u*2+AB);AA<0&&(AA=u*2+AA);if(v&&AB>AA){AB=AB-u*2;}if(!v&&AA>AB){AA=AA-u*2;}}else{AB=AK[0];AA=AK[1];AM=AK[2];AL=AK[3];}var AF=AA-AB;if(l.abs(AF)>AO){var AN=AA;var AQ=AG;var AD=Al;AA=AB+AO*(v&&AA>AB?1:-1);AG=AM+AR*l.cos(AA);Al=AL+AP*l.sin(AA);AU=B.arcToCubicCurve(AG,Al,AR,AP,AJ,0,v,AQ,AD,[AA,AN,AM,AL]);}AF=AA-AB;var z=l.cos(AB);var Ak=l.sin(AB);var w=l.cos(AA);var Aj=l.sin(AA);var AX=l.tan(AF/4);var Aa=4/3*AR*AX;var AY=4/3*AP*AX;var Ah=[AH,Am];var Af=[AH+Aa*Ak,Am-AY*z];var Ae=[AG+Aa*Aj,Al-AY*w];var Ac=[AG,Al];Af[0]=2*Ah[0]-Af[0];Af[1]=2*Ah[1]-Af[1];if(AK){return[Af,Ae,Ac].concat(AU);}else{AU=[Af,Ae,Ac].concat(AU).join().split(",");var AT=[];for(var Ad=0,AI=AU.length;Ad<AI;Ad++){AT[Ad]=Ad%2?Ai(AU[Ad-1],AU[Ad],A).y:Ai(AU[Ad],AU[Ad+1],A).x;}return AT;}};B.findDotAtSegment=function(r,A,u,s,z,y,x,w,AA){var v=1-AA;return{x:k(v,3)*r+k(v,2)*3*AA*u+v*3*AA*AA*z+k(AA,3)*x,y:k(v,3)*A+k(v,2)*3*AA*s+v*3*AA*AA*y+k(AA,3)*w};};B.curveDim=O.cached(function(s,A,u,t,AH,AG,AD,AA){var AF=(AH-2*u+s)-(AD-2*AH+u);var AC=2*(u-s)-2*(AH-u);var z=s-u;var w=(-AC+l.sqrt(AC*AC-4*AF*z))/2/AF;var v=(-AC-l.sqrt(AC*AC-4*AF*z))/2/AF;var AB=[A,AA];var AE=[s,AD];var r;l.abs(w)>1000000000000&&(w=0.5);l.abs(v)>1000000000000&&(v=0.5);if(w>0&&w<1){r=B.findDotAtSegment(s,A,u,t,AH,AG,AD,AA,w);AE.push(r.x);AB.push(r.y);}if(v>0&&v<1){r=B.findDotAtSegment(s,A,u,t,AH,AG,AD,AA,v);AE.push(r.x);AB.push(r.y);}AF=(AG-2*t+A)-(AA-2*AG+t);AC=2*(t-A)-2*(AG-t);z=A-t;w=(-AC+l.sqrt(AC*AC-4*AF*z))/2/AF;v=(-AC-l.sqrt(AC*AC-4*AF*z))/2/AF;l.abs(w)>1000000000000&&(w=0.5);l.abs(v)>1000000000000&&(v=0.5);if(w>0&&w<1){r=B.findDotAtSegment(s,A,u,t,AH,AG,AD,AA,w);AE.push(r.x);AB.push(r.y);}if(v>0&&v<1){r=B.findDotAtSegment(s,A,u,t,AH,AG,AD,AA,v);AE.push(r.x);AB.push(r.y);}return{min:{x:L.apply(0,AE),y:L.apply(0,AB)},max:{x:g.apply(0,AE),y:g.apply(0,AB)}};});B._path2curve=O.cached(function(AE,AA){var t=B.pathToAbsolute(AE);var AB=AA&&B.pathToAbsolute(AA);var AC={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var w=function(AG,AH){var AF;var AI;if(!AG){return["C",AH.x,AH.y,AH.x,AH.y,AH.x,AH.y];}if(!(AG[0] in p)){AH.qx=AH.qy=null;}switch(AG[0]){case"M":AH.X=AG[1];AH.Y=AG[2];break;case"A":AG=["C"].concat(B.arcToCubicCurve.apply(0,[AH.x,AH.y].concat(AG.slice(1))));break;case"S":AF=AH.x+(AH.x-(AH.bx||AH.x));AI=AH.y+(AH.y-(AH.by||AH.y));AG=["C",AF,AI].concat(AG.slice(1));break;case"T":AH.qx=AH.x+(AH.x-(AH.qx||AH.x));AH.qy=AH.y+(AH.y-(AH.qy||AH.y));AG=["C"].concat(B.quadraticToCubicCurve(AH.x,AH.y,AH.qx,AH.qy,AG[1],AG[2]));break;case"Q":AH.qx=AG[1];AH.qy=AG[2];AG=["C"].concat(B.quadraticToCubicCurve(AH.x,AH.y,AG[1],AG[2],AG[3],AG[4]));break;case"L":AG=["C"].concat(B.lineToCubicCurve(AH.x,AH.y,AG[1],AG[2]));break;case"H":AG=["C"].concat(B.lineToCubicCurve(AH.x,AH.y,AG[1],AH.y));
break;case"V":AG=["C"].concat(B.lineToCubicCurve(AH.x,AH.y,AH.x,AG[1]));break;case"Z":AG=["C"].concat(B.lineToCubicCurve(AH.x,AH.y,AH.X,AH.Y));break;}return AG;};var r=function(AF,AG){if(AF[AG].length>7){AF[AG].shift();var AH=AF[AG];while(AH.length){AF.splice(AG++,0,["C"].concat(AH.splice(0,6)));}AF.splice(AG,1);v=g(t.length,AB&&AB.length||0);}};var s=function(AJ,AI,AG,AF,AH){if(AJ&&AI&&AJ[AH][0]=="M"&&AI[AH][0]!="M"){AI.splice(AH,0,["M",AF.x,AF.y]);AG.bx=0;AG.by=0;AG.x=AJ[AH][1];AG.y=AJ[AH][2];v=g(t.length,AB&&AB.length||0);}};for(var y=0,v=g(t.length,AB&&AB.length||0);y<v;y++){t[y]=w(t[y],AC);r(t,y);AB&&(AB[y]=w(AB[y],A));AB&&r(AB,y);s(t,AB,AC,A,y);s(AB,t,A,AC,y);var x=t[y];var AD=AB&&AB[y];var u=x.length;var z=AB&&AD.length;AC.x=x[u-2];AC.y=x[u-1];AC.bx=parseFloat(x[u-4])||AC.x;AC.by=parseFloat(x[u-3])||AC.y;A.bx=AB&&(parseFloat(AD[z-4])||A.x);A.by=AB&&(parseFloat(AD[z-3])||A.y);A.x=AB&&AD[z-2];A.y=AB&&AD[z-1];}return AB?[t,AB]:t;});B.path2curve=function(r,A){return B.pathClone(B._path2curve(r,A));};B.parseDots=O.cached(function(z){var y=[];for(var v=0,s=z.length;v<s;v++){var A={};var x=z[v].match(U);A.color=X.getRGB(x[1]);if(A.color.error){return null;}A.color=A.color.hex;x[2]&&(A.offset=x[2]+"%");y.push(A);}for(v=1,s=y.length-1;v<s;v++){if(!y[v].offset){var r=parseFloat(y[v-1].offset||0);var t=0;for(var u=v+1;u<s;u++){if(y[u].offset){t=y[u].offset;break;}}if(!t){t=100;u=s;}t=parseFloat(t);var w=(t-r)/(u-v+1);for(;v<u;v++){r+=w;y[v].offset=r+"%";}}}return y;});B.XYToString=function(){return this.x+E+this.y;};B.getPointAtSegmentLength=O.cached(function(s,A,w,v,AC,AB,AA,z,t){var y=0;var u;for(var x=0;x<1.01;x+=0.01){var r=B.findDotAtSegment(s,A,w,v,AC,AB,AA,z,x);x&&(y+=k(k(u.x-r.x,2)+k(u.y-r.y,2),0.5));if(y>=t){return r;}u=r;}});var a={};B.getPointAtSegmentLength=function(u,r,y,x,AG,AF,AE,AC,v){var AB=0;var AA=100;var t=[u,r,y,x,AG,AF,AE,AC].join();var A=a[t];var w;var s;if(!A){A={data:[]};a[t]=A;}if(A.timer){clearTimeout(A.timer);}A.timer=setTimeout(function(){delete a[t];},2000);if(v!=null){var AD=getPointAtSegmentLength(u,r,y,x,AG,AF,AE,AC);AA=~~AD*10;}for(var z=0;z<AA+1;z++){if(A.data[v]>z){s=A.data[z*AA];}else{s=B.findDotsAtSegment(u,r,y,x,AG,AF,AE,AC,z/AA);A.data[z]=s;}if(z){AB+=k(k(w.x-s.x,2)+k(w.y-s.y,2),0.5);}if(v!=null&&AB>=v){return s;}if(v==null){return AB;}}};B.getLengthFactory=function(A,r){return function(AF,u,v){AF=B.path2curve(AF);var AC;var AB;var s;var w;var t="";var AE={};var AD;var AA=0;for(var z=0,u=AF.length;z<u;z++){s=AF[z];if(s[0]=="M"){AC=+s[1];AB=+s[2];}else{w=B.getPointAtSegmentLength(AC,AB,s[1],s[2],s[3],s[4],s[5],s[6]);if(AA+w>u){if(r&&!AE.start){AD=B.getPointAtSegmentLength(AC,AB,s[1],s[2],s[3],s[4],s[5],s[6],u-AA);t+=["C",AD.start.x,AD.start.y,AD.m.x,AD.m.y,AD.x,AD.y];if(v){return t;}AE.start=t;t=["M",AD.x,AD.y+"C",AD.n.x,AD.n.y,AD.end.x,AD.end.y,s[5],s[6]].join();AA+=w;AC=+s[5];AB=+s[6];continue;}if(!A&&!r){AD=B.getPointAtSegmentLength(AC,AB,s[1],s[2],s[3],s[4],s[5],s[6],u-AA);return{x:AD.x,y:AD.y,alpha:AD.alpha};}}AA+=w;AC=+s[5];AB=+s[6];}t+=s;}AE.end=t;AD=A?AA:r?AE:B.findDotsAtSegment(AC,AB,s[1],s[2],s[3],s[4],s[5],s[6],1);AD.alpha&&(AD={x:AD.x,y:AD.y,alpha:AD.alpha});return AD;};};B.getTotalLength=B.getLengthFactory(1);B.getPointAtLength=B.getLengthFactory();B.getSubpathsAtLength=B.getLengthFactory(0,1);B.applyAttributes=function(s,A,u){var x;if(u!=null){x={};x[A]=u;}else{if(A!=null&&e(A)){x=A;}}var w=s.paper.customAttributes;for(var r in w){if(w.hasOwnProperty(r)&&x.hasOwnProperty(r)&&Q(w[r])){var t=w[r].apply(s,[].concat(x[r]));s.attrs[r]=x[r];for(var v in t){if(t.hasOwnProperty(v)){x[v]=t[v];}}}}return x;};H.prototype={attr:f,blur:f,clone:function(){if(this.removed){return null;}var A=this.attr();delete A.scale;delete A.translation;return this.paper[this.type]().attr(A);},createElement:f,detach:function(s,r){var A=this;O.detach(H._getEventType(s),r,(A.shape||A.node||Z));return A;},getRegion:f,getPointAtLength:function(A){if(this.type!="path"){return;}return B.getPointAtLength(this.attrs.path,A);},getSubpath:function(s,r){if(this.type!="path"){return;}if(l.abs(this.getTotalLength()-r)<"1e-6"){return B.getSubpathsAtLength(this.attrs.path,s).end;}var A=B.getSubpathsAtLength(this.attrs.path,r,1);return s?B.getSubpathsAtLength(A,s).end:A;},getTotalLength:function(){if(this.type!="path"){return;}if(this.node.getTotalLength){return this.node.getTotalLength();}return B.getTotalLength(this.attrs.path);},hide:f,hover:function(r,A){return this.on("mouseover",r).on("mouseout",A);},insertAfter:f,insertBefore:f,on:function(u,t,r){var A=this;var s=H._getEventType(u);O.on(s,O.bind(t,r||A),A.shape||A.node||Z,H._getEventConfig(s,u));return A;},remove:f,resetScale:function(){if(this.removed){return this;}this._.sx=1;this._.sy=1;this.attrs.scale="1 1";},rotate:f,scale:function(AR,AQ,AJ,AH){if(this.removed){return this;}if(AR==null&&AQ==null){return{x:this._.sx,y:this._.sy,toString:B.XYToString};}AQ=AQ||AR;!+AQ&&(AQ=AR);var r;var A;var AZ;var AY;var Ac=this.attrs;if(AR!=0){var Ad=this.getRegion();var v=Ad.x+Ad.width/2;var u=Ad.y+Ad.height/2;var AW=l.abs(AR/this._.sx);var AV=l.abs(AQ/this._.sy);AJ=(+AJ||AJ==0)?AJ:v;AH=(+AH||AH==0)?AH:u;var AB=~~(this._.sx>0);var AA=~~(this._.sy>0);var AI=~~(AR/l.abs(AR));var AG=~~(AQ/l.abs(AQ));var z=AW*AI;var w=AV*AG;var AS=this.node.style;var AP=AJ+l.abs(v-AJ)*z*(v>AJ==AB?1:-1);var AO=AH+l.abs(u-AH)*w*(u>AH==AA?1:-1);var AM=(AR*AI>AQ*AG?AV:AW);switch(this.type){case"rect":case"image":var AD=Ac.width*AW;var AN=Ac.height*AV;this.attr({height:AN,r:Ac.r*AM,width:AD,x:AP-AD/2,y:AO-AN/2});break;case"circle":case"ellipse":this.attr({rx:Ac.rx*AI*AW,ry:Ac.ry*AG*AV,r:Ac.r*L(AI*AW,AG*AV),cx:AP,cy:AO});break;case"text":this.attr({x:AP,y:AO});break;case"path":var AU=B.pathToRelative(Ac.path);var AC=true;var AL=AB?z:AW;var AK=AA?w:AV;for(var Ab=0,AE=AU.length;Ab<AE;Ab++){var AX=AU[Ab];var AF=W.call(AX[0]);if(AF=="M"&&AC){continue;}else{AC=false;}if(AF=="A"){AX[AU[Ab].length-2]*=AL;AX[AU[Ab].length-1]*=AK;AX[1]*=AW;AX[2]*=AV;AX[5]=+(AI+AG?!!+AX[5]:!+AX[5]);
}else{if(AF=="H"){for(var Aa=1,t=AX.length;Aa<t;Aa++){AX[Aa]*=AL;}}else{if(AF=="V"){for(Aa=1,t=AX.length;Aa<t;Aa++){AX[Aa]*=AK;}}else{for(Aa=1,t=AX.length;Aa<t;Aa++){AX[Aa]*=(Aa%2)?AL:AK;}}}}}var AT=B.pathDimensions(AU);r=AP-AT.x-AT.width/2;A=AO-AT.y-AT.height/2;AU[0][1]+=r;AU[0][2]+=A;this.attr({path:AU});break;}if(this.type in b&&(AI!=1||AG!=1)){if(this.transformations){this.transformations[2]="scale(".concat(AI,",",AG,")");this.node.setAttribute("transform",this.transformations.join(E));r=(AI==-1)?-Ac.x-(AD||0):Ac.x;A=(AG==-1)?-Ac.y-(AN||0):Ac.y;this.attr({x:r,y:A});Ac.fx=AI-1;Ac.fy=AG-1;}else{this.node.filterMatrix=m+".Matrix(M11=".concat(AI,", M12=0, M21=0, M22=",AG,', Dx=0, Dy=0, sizingmethod="auto expand", filtertype="bilinear")');AS.filter=(this.node.filterMatrix||M)+(this.node.filterOpacity||M);}}else{if(this.transformations){this.transformations[2]=M;this.node.setAttribute("transform",this.transformations.join(E));Ac.fx=0;Ac.fy=0;}else{this.node.filterMatrix=M;AS.filter=(this.node.filterMatrix||M)+(this.node.filterOpacity||M);}}Ac.scale=[AR,AQ,AJ,AH].join(E);this._.sx=AR;this._.sy=AQ;}return this;},show:f,toBack:f,toFront:f,toString:function(){return'"'+W.call(this.type)+'": AlloyUI Drawing Element';},translate:f,unhover:function(r,A){return this.detach("mouseover",r).detach("mouseout",A);}};H._getEventConfig=f;H._getEventType=function(A){return A;};D.Element=H;var F=O.Component.create({NAME:"set",EXTENDS:O.ArrayList,prototype:{pop:function(){var A=this;return A._items.pop();},push:function(){var A=this;var r=A._items;var s=arguments;var v=s.length;var u;for(var t=0;t<v;t++){u=s[t];if(u&&u instanceof H||u instanceof F){r[r.length]=s[t];}}return A;},clone:function(){var A=this;var r=new F();r._items=A._items;return r;},invoke:function(s){var A=this;var t=Array.prototype.slice.call(arguments,1);var w;var r=A._items;for(var u=0,v=r.length;u<v;u++){w=r[u];if(s in w){w[s].apply(r[u],t);}}return A;}}});D.Set=F;F.addMethod=function(A){return O.ArrayList.addMethod(D.Set.prototype,A);};var h=O.Object.keys(H.prototype);F.addMethod(h);F.prototype.getRegion=F.prototype.getBBox=function(){var r=this;var A=[];var AA=[];var s=[];var v=[];var t=r._items;for(var u=t.length;u--;){var z=t[u].getRegion();A.push(z.x);AA.push(z.y);s.push(z.x+z.width);v.push(z.y+z.height);}A=L.apply(0,A);AA=L.apply(0,AA);return{x:A,y:AA,width:g.apply(0,s)-A,height:g.apply(0,v)-AA};};F.prototype.attr=function(s,v){var A=this;var r=A._items;if(s&&T(s)&&e(s[0])){for(var t=0,u=s.length;t<u;t++){r[t].attr(s[t]);}}else{for(var t=0,u=r.length;t<u;t++){r[t].attr(s,v);}}return A;};F.prototype.toString=function(){return this._items.join(",");};D.REGEX_ISURL=c;D.REGEX_SEPARATOR=n;D.REGEX_SEPARATOR_GRADIENT=K;D.REGEX_RADIAL_GRADIENT=j;D.MAP_ATTRS_AVAILABLE=N;D.MAP_TYPES_IMAGE_TEXT=b;D.MAP_TYPES_CIRCLE_ELLIPSE=S;D.STR_EMPTY=M;D.STR_FILL=d;D.STR_SPACE=E;D.STR_MS_PROG_ID_PREFIX=m;D.Util=B;D.Element=H;O.Drawing=D;},"1.0.1",{requires:["aui-base","aui-color-util","substitute"]});AUI.add("aui-drawing-svg",function(U){var I=U.Lang,O=I.isArray,B=I.isFunction,N=I.isObject,Q=I.isString,F=I.isUndefined,f=U.config,E=f.doc,c=U.ColorUtil,R=U.Drawing,W=R.Element,h,J=R.Util,S=R.prototype,H=W.prototype,P=Math,a=P.max,K=P.pow,T=R.MAP_ATTRS_AVAILABLE,X=R.MAP_TYPES_IMAGE_TEXT,b=R.MAP_TYPES_CIRCLE_ELLIPSE,e=R.REGEX_ISURL,M=R.REGEX_RADIAL_GRADIENT,L=R.REGEX_SEPARATOR,C=R.REGEX_SEPARATOR_GRADIENT,Z="Created with AlloyUI",V=R.STR_EMPTY,G=R.STR_FILL,D=R.STR_SPACE,g=1.2,Y=String.prototype.toLowerCase,d=String.prototype.toUpperCase;S.svgns="http://www.w3.org/2000/svg";S.xlink="http://www.w3.org/1999/xlink";J.CREATE_ELEMENT=function(A){var i=E.createElementNS(S.svgns,A);i.style.webkitTapHighlightColor="rgba(0,0,0,0)";return i;};J.SET_ATTRS=function(j,A){for(var i in A){if(A.hasOwnProperty(i)){j.setAttribute(i,String(A[i]));}}return j;};J.TUNE_TEXT=function(j,m){if(j.type!="text"||!(m.hasOwnProperty("text")||m.hasOwnProperty("font")||m.hasOwnProperty("font-size")||m.hasOwnProperty("x")||m.hasOwnProperty("y"))){return;}var l;var q=j.attrs;var k=j.node;var s=10;if(k.firstChild){s=parseInt(E.defaultView.getComputedStyle(k.firstChild,V).getPropertyValue("font-size"),10);}if(m.hasOwnProperty("text")){q.text=m.text;while(k.firstChild){k.removeChild(k.firstChild);}l=String(m.text).split("\n");for(var n=0,A=l.length;n<A;n++){if(l[n]){var p=J.CREATE_ELEMENT("tspan");if(n){J.SET_ATTRS(p,{dy:s*g,x:q.x});}p.appendChild(E.createTextNode(l[n]));k.appendChild(p);}}}else{l=k.getElementsByTagName("tspan");for(n=0,A=l.length;n<A;n++){if(n){J.SET_ATTRS(l[n],{dy:s*g,x:q.x});}}}J.SET_ATTRS(k,{y:q.y});var o=j.getRegion();var r=q.y-(o.y+o.height/2);if(r&&isFinite(r)){J.SET_ATTRS(k,{y:q.y+r});}};J.UPDATE_POSITION=function(A){var i=A.getRegion();J.SET_ATTRS(A.pattern,{patternTransform:U.substitute("translate({0},{1})",[i.x,i.y])});};h=R.Impl={addGradientFill:function(s,A,v){var o="linear";var n=0.5;var m=0.5;var k=s.style;var l;A=String(A).replace(M,function(AB,i,AC){o="radial";if(i&&AC){n=parseFloat(i);m=parseFloat(AC);var AA=((m>0.5)*2-1);K(n-0.5,2)+K(m-0.5,2)>0.25&&(m=P.sqrt(0.25-K(n-0.5,2))*AA+0.5)&&m!=0.5&&(m=m.toFixed(5)-0.00001*AA);}return V;});A=A.split(C);if(o=="linear"){var z=A.shift();z=-parseFloat(z);if(isNaN(z)){return null;}l=[0,0,P.cos(z*P.PI/180),P.sin(z*P.PI/180)];var x=1/(a(P.abs(l[2]),P.abs(l[3]))||1);l[2]*=x;l[3]*=x;if(l[2]<0){l[0]=-l[2];l[2]=0;}if(l[3]<0){l[1]=-l[3];l[3]=0;}}var r=J.parseDots(A);if(!r){return null;}var u=s.getAttribute(G);u=u.match(/^url\(#(.*)\)$/);u&&v.defs.removeChild(E.getElementById(u[1]));var j=J.CREATE_ELEMENT(o+"Gradient");j.id=U.guid();var t;if(o=="radial"){t={fx:n,fy:m};}else{t={x1:l[0],y1:l[1],x2:l[2],y2:l[3]};}J.SET_ATTRS(j,t);v.defs.appendChild(j);for(var y=0,p=r.length;y<p;y++){var w=J.CREATE_ELEMENT("stop");var q=r[y].offset;if(!q){if(!y){q="0%";}else{q="100%";}}J.SET_ATTRS(w,{offset:q,"stop-color":r[y].color||"#fff"});j.appendChild(w);}J.SET_ATTRS(s,{fill:"url(#"+j.id+")",opacity:1,"fill-opacity":1});k.fill=V;k.opacity=1;k.fillOpacity=1;
return 1;},clear:function(){var A=this;var i=A.canvas;while(i.firstChild){i.removeChild(i.firstChild);}A.bottom=A.top=null;A.desc=J.CREATE_ELEMENT("desc");A.desc.appendChild(E.createTextNode(Z));i.appendChild(A.desc);A.defs=J.CREATE_ELEMENT("defs");i.appendChild(A.defs);},createCanvas:function(){var j=this;var k=j.get("contentBox");var i=j.get("x");var n=j.get("y");var m=j.get("width");var A=j.get("height");var l=J.CREATE_ELEMENT("svg");J.SET_ATTRS(l,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:m,height:A});k.prepend(l);j.canvas=l;j.clear();},createCircle:function(i,m,k){var A=this;var j=J.CREATE_ELEMENT("circle");A.canvas.appendChild(j);var l=new W(j,A);l.attrs={cx:i,cy:m,r:k,fill:"none",stroke:"#000"};l.type="circle";J.SET_ATTRS(j,l.attrs);return l;},createEllipse:function(i,n,m,l){var A=this;var j=J.CREATE_ELEMENT("ellipse");A.canvas.appendChild(j);var k=new W(j,A);k.attrs={cx:i,cy:n,rx:m,ry:l,fill:"none",stroke:"#000"};k.type="ellipse";J.SET_ATTRS(j,k.attrs);return k;},createImage:function(n,i,o,j,l){var A=this;var k=J.CREATE_ELEMENT("image");J.SET_ATTRS(k,{x:i,y:o,width:j,height:l,preserveAspectRatio:"none"});k.setAttributeNS(A.xlink,"href",n);A.canvas.appendChild(k);var m=new W(k,A);m.attrs={x:i,y:o,width:j,height:l,src:n};m.type="image";return m;},createPath:function(i){var A=this;var j=J.CREATE_ELEMENT("path");A.canvas.appendChild(j);var k=new W(j,A);k.type="path";h.setFillAndStroke(k,{fill:"none",stroke:"#000",path:i});return k;},createRectangle:function(i,o,j,l,n){var A=this;var k=J.CREATE_ELEMENT("rect");A.canvas.appendChild(k);var m=new W(k,A);m.attrs={x:i,y:o,width:j,height:l,r:n,rx:n,ry:n,fill:"none",stroke:"#000"};m.type="rect";J.SET_ATTRS(k,m.attrs);return m;},createText:function(i,m,l){var A=this;var k=J.CREATE_ELEMENT("text");J.SET_ATTRS(k,{x:i,y:m,"text-anchor":"middle"});A.canvas.appendChild(k);var j=new W(k,A);j.attrs={x:i,y:m,"text-anchor":"middle",text:l,font:T.font,stroke:"none",fill:"#000"};j.type="text";h.setFillAndStroke(j,j.attrs);return j;},setFillAndStroke:function(s,AE){var w={"":[0],"none":[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]};var y=s.node;var u=s.attrs;var q=s.rotate();var m=function(AL,AK){AK=w[Y.call(AK)];if(AK){var AI=AL.attrs["stroke-width"]||"1";var AG={round:AI,square:AI,butt:0}[AL.attrs["stroke-linecap"]||AE["stroke-linecap"]]||0;var AJ=[];var AH=AK.length;while(AH--){AJ[AH]=AK[AH]*AI+((AH%2)?1:-1)*AG;}J.SET_ATTRS(y,{"stroke-dasharray":AJ.join(",")});}};if(AE.hasOwnProperty("rotation")){q=AE.rotation;}var p=String(q).split(L);if(!(p.length-1)){p=null;}else{p[1]=+p[1];p[2]=+p[2];}parseFloat(q)&&s.rotate(0,true);for(var x in AE){if(AE.hasOwnProperty(x)){if(!T.hasOwnProperty(x)){continue;}var v=AE[x];u[x]=v;switch(x){case"blur":s.blur(v);break;case"rotation":s.rotate(v,true);break;case"href":case"title":case"target":var AB=y.parentNode;if(Y.call(AB.tagName)!="a"){var k=J.CREATE_ELEMENT("a");AB.insertBefore(k,y);k.appendChild(y);AB=k;}AB.setAttributeNS(s.paper.xlink,x,v);break;case"cursor":y.style.cursor=v;break;case"clip-rect":var i=String(v).split(L);if(i.length==4){s.clip&&s.clip.parentNode.parentNode.removeChild(s.clip.parentNode);var j=J.CREATE_ELEMENT("clipPath");var z=J.CREATE_ELEMENT("rect");j.id=U.guid();J.SET_ATTRS(z,{x:i[0],y:i[1],width:i[2],height:i[3]});j.appendChild(z);s.paper.defs.appendChild(j);J.SET_ATTRS(y,{"clip-path":"url(#"+j.id+")"});s.clip=z;}if(!v){var AC=E.getElementById(y.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,V));AC&&AC.parentNode.removeChild(AC);J.SET_ATTRS(y,{"clip-path":V});delete s.clip;}break;case"path":if(s.type=="path"){var AD="M0,0";if(v){AD=J.pathToAbsolute(v);}J.SET_ATTRS(y,{d:AD});}break;case"width":y.setAttribute(x,v);if(u.fx){x="x";v=u.x;}else{break;}case"x":if(u.fx){v=-u.x-(u.width||0);}case"rx":if(x=="rx"&&s.type=="rect"){break;}case"cx":p&&(x=="x"||x=="cx")&&(p[1]+=v-u[x]);y.setAttribute(x,v);s.pattern&&J.UPDATE_POSITION(s);break;case"height":y.setAttribute(x,v);if(u.fy){x="y";v=u.y;}else{break;}case"y":if(u.fy){v=-u.y-(u.height||0);}case"ry":if(x=="ry"&&s.type=="rect"){break;}case"cy":p&&(x=="y"||x=="cy")&&(p[2]+=v-u[x]);y.setAttribute(x,v);s.pattern&&J.UPDATE_POSITION(s);break;case"r":if(s.type=="rect"){J.SET_ATTRS(y,{rx:v,ry:v});}else{y.setAttribute(x,v);}break;case"src":if(s.type=="image"){y.setAttributeNS(s.paper.xlink,"href",v);}break;case"stroke-width":y.style.strokeWidth=v;y.setAttribute(x,v);if(u["stroke-dasharray"]){m(s,u["stroke-dasharray"]);}break;case"stroke-dasharray":m(s,v);break;case"translation":var n=String(v).split(L);n[0]=+n[0]||0;n[1]=+n[1]||0;if(p){p[1]+=n[0];p[2]+=n[1];}J.translate.call(s,n[0],n[1]);break;case"scale":n=String(v).split(L);s.scale(+n[0]||1,+n[1]||+n[0]||1,isNaN(parseFloat(n[2]))?null:+n[2],isNaN(parseFloat(n[3]))?null:+n[3]);break;case G:var l=String(v).match(e);if(l){j=J.CREATE_ELEMENT("pattern");var t=J.CREATE_ELEMENT("image");j.id=U.guid();J.SET_ATTRS(j,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});J.SET_ATTRS(t,{x:0,y:0});t.setAttributeNS(s.paper.xlink,"href",l[1]);j.appendChild(t);var AF=E.createElement("img");AF.style.cssText="position: absolute; left: -9999em; top: -9999em";AF.onload=function(){var AG={width:this.offsetWidth,height:this.offsetHeight};J.SET_ATTRS(j,AG);J.SET_ATTRS(t,AG);E.body.removeChild(this);s.paper.safari();};E.body.appendChild(AF);AF.src=l[1];s.paper.defs.appendChild(j);y.style.fill="url(#"+j.id+")";J.SET_ATTRS(y,{fill:"url(#"+j.id+")"});s.pattern=j;s.pattern&&J.UPDATE_POSITION(s);break;}var AA=c.getRGB(v);if(!AA.error){delete AE.gradient;delete u.gradient;if(!F(u.opacity)&&F(AE.opacity)){J.SET_ATTRS(y,{opacity:u.opacity});}if(!F(u["fill-opacity"])&&F(AE["fill-opacity"])){J.SET_ATTRS(y,{"fill-opacity":u["fill-opacity"]});}}else{if((b.hasOwnProperty(s.type)||String(v).charAt(0)!="r")&&h.addGradientFill(y,v,s.paper)){u.gradient=v;u.fill="none";break;}}if(AA.hasOwnProperty("o")){J.SET_ATTRS(y,{"fill-opacity":AA.o>1?AA.o/100:AA.o});
}case"stroke":AA=c.getRGB(v);y.setAttribute(x,AA.hex);if(x=="stroke"&&AA.hasOwnProperty("o")){J.SET_ATTRS(y,{"stroke-opacity":AA.o>1?AA.o/100:AA.o});}break;case"gradient":if(b.hasOwnProperty(s.type)||String(v).charAt(0)!="r"){h.addGradientFill(y,v,s.paper);}break;case"opacity":if(u.gradient&&!u.hasOwnProperty("stroke-opacity")){J.SET_ATTRS(y,{"stroke-opacity":v>1?v/100:v});}case"fill-opacity":if(u.gradient){var A=E.getElementById(y.getAttribute(G).replace(/^url\(#|\)$/g,V));if(A){var o=A.getElementsByTagName("stop");o[o.length-1].setAttribute("stop-opacity",v);}break;}default:if(x=="font-size"){v=parseInt(v,10)+"px";}var r=x.replace(/(\-.)/g,function(AG){return d.call(AG.substring(1));});y.style[r]=v;y.setAttribute(x,v);break;}}}J.TUNE_TEXT(s,AE);if(p){s.rotate(p.join(D));}else{parseFloat(q)&&s.rotate(q,true);}},remove:function(){var A=this;var j=A.get("contentBox");j.removeChild(A.canvas);for(var k in A){if(S.hasOwnProperty(k)){A[k]=J.removed(k);}}}};S._uiSetWidth=function(i){var A=this;R.superclass._uiSetWidth.apply(A,arguments);A.canvas.setAttribute("width",i);};S._uiSetHeight=function(i){var A=this;R.superclass._uiSetHeight.apply(A,arguments);A.canvas.setAttribute("height",i);};H.createElement=function(j,i){var A=this;A[0]=j;A.id=U.guid();A.node=j;A.paper=i;A.attrs=A.attrs||{};A.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};if(!i.bottom){i.bottom=A;}A.prev=i.top;if(i.top){i.top.next=A;}i.top=A;A.next=null;};H.rotate=function(j,i,l){var A=this;if(A.removed){return A;}if(j==null){if(A._.rt.cx){return[A._.rt.deg,A._.rt.cx,A._.rt.cy].join(D);}return A._.rt.deg;}var k=A.getRegion();j=String(j).split(L);if(j.length-1){i=parseFloat(j[1]);l=parseFloat(j[2]);}j=parseFloat(j[0]);if(i!=null){A._.rt.deg=j;}else{A._.rt.deg+=j;}(l==null)&&(i=null);A._.rt.cx=i;A._.rt.cy=l;i=i==null?k.x+k.width/2:i;l=l==null?k.y+k.height/2:l;if(A._.rt.deg){A.transformations[0]=U.substitute("rotate({0} {1} {2})",[A._.rt.deg,i,l]);if(A.clip){J.SET_ATTRS(A.clip,{transform:U.substitute("rotate({0} {1} {2})",[-A._.rt.deg,i,l])});}}else{A.transformations[0]=V;if(A.clip){J.SET_ATTRS(A.clip,{transform:V});}}J.SET_ATTRS(A.node,{transform:A.transformations.join(D)});return A;};H.hide=function(){var A=this;!A.removed&&(A.node.style.display="none");return this;};H.show=function(){var A=this;!A.removed&&(A.node.style.display="");return A;};H.remove=function(){var A=this;if(A.removed){return;}J.tear(A,A.paper);A.node.parentNode.removeChild(A.node);for(var j in A){delete A[j];}A.removed=true;};H.getRegion=function(){var A=this;if(A.removed){return A;}if(A.type=="path"){return J.pathDimensions(A.attrs.path);}var k=false;if(A.node.style.display=="none"){A.show();k=true;}var o={};try{o=A.node.getBBox();}catch(m){}finally{o=o||{};}if(A.type=="text"){o={x:o.x,y:Infinity,width:0,height:0};for(var j=0,l=A.node.getNumberOfChars();j<l;j++){var n=A.node.getExtentOfChar(j);if(n.y<o.y){o.y=n.y;}if(n.y+n.height-o.y>o.height){o.height=n.y+n.height-o.y;}if(n.x+n.width-o.x>o.width){o.width=n.x+n.width-o.x;}}}if(k){A.hide();}return o;};H.getBBox=H.getRegion;H.attr=function(A,p){var r=this;if(r.removed){return r;}if(A==null){var n={};for(var m in r.attrs){if(r.attrs.hasOwnProperty(m)){n[m]=r.attrs[m];}}r._.rt.deg&&(n.rotation=r.rotate());(r._.sx!=1||r._.sy!=1)&&(n.scale=r.scale());n.gradient&&n.fill=="none"&&(n.fill=n.gradient)&&delete n.gradient;return n;}if(p==null&&Q(A)){if(A=="translation"){return J.translate.call(r);}if(A=="rotation"){return r.rotate();}if(A=="scale"){return r.scale();}if(A==G&&r.attrs.fill=="none"&&r.attrs.gradient){return r.attrs.gradient;}return r.attrs[A];}if(p==null&&O(A)){var q={};for(var l=0,o=A.length;l<o;l++){q[A[l]]=r.attr(A[l]);}return q;}var k=J.applyAttributes(r,A,p);h.setFillAndStroke(r,k);return r;};H.toFront=function(){var A=this;if(A.removed){return A;}A.node.parentNode.appendChild(A.node);var i=A.paper;i.top!=A&&J.toFront(A,i);return A;};H.toBack=function(){var A=this;if(A.removed){return A;}if(A.node.parentNode.firstChild!=A.node){A.node.parentNode.insertBefore(A.node,A.node.parentNode.firstChild);J.toBack(A,A.paper);}return A;};H.insertAfter=function(i){var A=this;if(A.removed){return A;}var j=i.node||i instanceof R.Set&&i.item(i.size()).node;if(j.nextSibling){j.parentNode.insertBefore(A.node,j.nextSibling);}else{j.parentNode.appendChild(A.node);}J.insertAfter(A,i,A.paper);return A;};H.insertBefore=function(i){var A=this;if(A.removed){return A;}var j=i.node||i instanceof R.Set&&i.item(0).node;j.parentNode.insertBefore(A.node,j);J.insertBefore(A,i,A.paper);return A;};H.blur=function(i){var A=this;if(+i!==0){var j=CREATE_ELEMENT("filter");var k=CREATE_ELEMENT("feGaussianBlur");A.attrs.blur=i;j.id=U.guid();J.SET_ATTRS(k,{stdDeviation:+i||1.5});j.appendChild(k);A.paper.defs.appendChild(j);A._blur=j;J.SET_ATTRS(A.node,{filter:"url(#"+j.id+")"});}else{if(A._blur){A._blur.parentNode.removeChild(A._blur);delete A._blur;delete A.attrs.blur;}A.node.removeAttribute("filter");}};},"1.0.1",{requires:["aui-drawing-base","substitute"]});AUI.add("aui-drawing-vml",function(S){var w=S.Lang,Z=w.isArray,v=w.isNumber,j=w.isObject,L=w.isString,V=w.isUndefined,P=S.config,c=P.doc,b=S.ColorUtil,G=S.Drawing,K=G.Element,f,B=G.Util,m=function(A){return v(A)?A+"px":A;},k=1000+H+1000,T=G.prototype,U=K.prototype,R=G.MAP_ATTRS_AVAILABLE,i={path:1,rect:1},F={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},N={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},W=G.MAP_TYPES_CIRCLE_ELLIPSE,p=Math,o=p.pow,X=p.round,s=G.STR_MS_PROG_ID_PREFIX,h=G.REGEX_ISURL,n=G.REGEX_RADIAL_GRADIENT,u=G.REGEX_SEPARATOR,M=G.REGEX_SEPARATOR_GRADIENT,O=/([clmz]),?([^clmz]*)/gi,C=/-?[^,\s-]+/g,D=/ progid:\S+Blur\([^\)]+\)/g,Q=G.STR_EMPTY,g=G.STR_FILL,H=G.STR_SPACE,E=1.2,J="M{0},{1}l{2},0,0,{3},{4},0z",Y="M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",q="position: absolute; left: -9999em; top: -9999em; padding: 0; margin: 0; line-height: 1; display: inline;",d="display: inline-block; position: relative; clip: rect(0 {1} {0} 0); overflow: hidden; height: {0}; width: {1};",t="position: absolute; left: 0; top: 0; height: {0}; width: {1};",l=String.prototype.toLowerCase,a=String.prototype.toUpperCase,I=10;
c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{if(!c.namespaces.rvml){c.namespaces.add("rvml","urn:schemas-microsoft-com:vml");}B.CREATE_ELEMENT=function(A){return c.createElement("<rvml:"+A+' class="rvml">');};}catch(r){B.CREATE_ELEMENT=function(A){return c.createElement("<"+A+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');};}B.path2vml=function(AF){var AD=/[ahqstv]/ig;var z=B.pathToAbsolute;var AC;if(String(AF).match(AD)){z=B.path2curve;}AD=/[clmz]/g;if(z==B.pathToAbsolute&&!String(AF).match(AD)){AC=String(AF).replace(O,function(AJ,AL,AH){var AK=[];var AG=l.call(AL)=="m";var AI=F[AL];AH.replace(C,function(AM){if(AG&&AK.length==2){AI+=AK+F[AL=="m"?"l":"L"];AK=[];}AK.push(X(AM*I));});return AI+AK;});return AC;}var AE=z(AF);var x;var A;AC=[];for(var AB=0,y=AE.length;AB<y;AB++){x=AE[AB];A=l.call(AE[AB][0]);if(A=="z"){A="x";}for(var AA=1,e=x.length;AA<e;AA++){A+=X(x[AA]*I)+(AA!=e-1?",":Q);}AC.push(A);}return AC.join(H);};B.rectPath=function(A,AB,e,z,AA){if(AA){return S.substitute(Y,[A+AA,AB,e-AA*2,AA,-AA,z-AA*2,AA*2-e,AA*2-z]);}else{return S.substitute(J,[A,AB,e,z,-e]);}};f=G.Impl={addGradientFill:function(z,AD){z.attrs=z.attrs||{};var AE=z.attrs;var AF;var AB="linear";var AC=".5 .5";var x;z.attrs.gradient=AD;AD=String(AD).replace(n,function(AH,AI,AG){AB="radial";if(AI&&AG){AI=parseFloat(AI);AG=parseFloat(AG);if(o(AI-0.5,2)+o(AG-0.5,2)>0.25){AG=p.sqrt(0.25-o(AI-0.5,2))*((AG>0.5)*2-1)+0.5;}AC=AI+H+AG;}return Q;});AD=AD.split(M);if(AB=="linear"){x=AD.shift();x=-parseFloat(x);if(isNaN(x)){return null;}}var AA=B.parseDots(AD);if(!AA){return null;}z=z.shape||z.node;AF=z.getElementsByTagName(g)[0]||B.CREATE_ELEMENT(g);if(!AF.parentNode){z.appendChild(AF);}if(AA.length){AF.on=true;AF.method="none";AF.color=AA[0].color;AF.color2=AA[AA.length-1].color;var A=[];for(var y=0,e=AA.length;y<e;y++){if(AA[y].offset){A.push(AA[y].offset+H+AA[y].color);}}if(AF.colors){AF.colors.value=A.length?A.join():"0% "+AF.color;}if(AB=="radial"){AF.type="gradientradial";AF.focus="100%";AF.focussize=AC;AF.focusposition=AC;}else{AF.type="gradient";AF.angle=(270-x)%360;}}return 1;},clear:function(){var A=this;A.canvas.innerHTML=Q;A.span=c.createElement("span");A.span.style.cssText=q;A.canvas.appendChild(A.span);A.bottom=A.top=null;},createCanvas:function(){var AE=this;var AA=AE.get("contentBox");var AC=AE.get("x");var AB=AE.get("y");var A=m(AE.get("width"));var AF=m(AE.get("height"));var e=c.createElement("div");AE.set("width",1000);AE.set("height",1000);AE.coordsize=I*1000+H+I*1000;AE.coordorigin="0 0";var AD=c.createElement("span");AD.style.cssText=q;e.appendChild(AD);AE.span=AD;AE.canvas=e;var z=e.style;e.style.cssText=S.substitute(d,[AF,A]);AA.prepend(e);},createCircle:function(e,AE,AB){var A=this;var AD=B.CREATE_ELEMENT("group");var AA=B.CREATE_ELEMENT("oval");var z=AA.style;AD.style.cssText=S.substitute(t,[m(A.get("height")),m(A.get("width"))]);AD.coordsize=k;AD.coordorigin=A.coordorigin;AD.appendChild(AA);var AC=new K(AA,AD,A);AC.type="circle";f.setFillAndStroke(AC,{stroke:"#000",fill:"none"});AC.attrs.cx=e;AC.attrs.cy=AE;AC.attrs.r=AB;AC.setBox({x:e-AB,y:AE-AB,width:AB*2,height:AB*2});A.canvas.appendChild(AD);return AC;},createEllipse:function(e,AE,AD,AB){var A=this;var AC=B.CREATE_ELEMENT("group");var AA=B.CREATE_ELEMENT("oval");AC.style.cssText=S.substitute(t,[m(A.get("height")),m(A.get("width"))]);AC.coordsize=k;AC.coordorigin=A.coordorigin;AC.appendChild(AA);var z=new K(AA,AC,A);z.type="ellipse";f.setFillAndStroke(z,{stroke:"#000"});z.attrs.cx=e;z.attrs.cy=AE;z.attrs.rx=AD;z.attrs.ry=AB;z.setBox({x:e-AD,y:AE-AB,width:AD*2,height:AB*2});A.canvas.appendChild(AC);return z;},createImage:function(A,AD,AC,AE,AB){var AG=this;var AF=B.CREATE_ELEMENT("group");var z=B.CREATE_ELEMENT("image");var AA=z.style;AF.style.cssText=S.substitute(t,[m(AG.get("height")),m(AG.get("width"))]);AF.coordsize=k;AF.coordorigin=AG.coordorigin;z.src=A;AF.appendChild(z);var e=new K(z,AF,AG);e.type="image";e.attrs.src=A;e.attrs.x=AD;e.attrs.y=AC;e.attrs.w=AE;e.attrs.h=AB;e.setBox({x:AD,y:AC,width:AE,height:AB});AG.canvas.appendChild(AF);return e;},createPath:function(x){var e=this;var AB=B.CREATE_ELEMENT("group");AB.style.cssText=S.substitute(t,[m(e.get("height")),m(e.get("width"))]);AB.coordsize=e.coordsize;AB.coordorigin=e.coordorigin;var y=B.CREATE_ELEMENT("shape");var z=y.style;z.width=e.get("width")+"px";z.height=e.get("height")+"px";y.coordsize=k;y.coordorigin=e.coordorigin;AB.appendChild(y);var AA=new K(y,AB,e);var A={fill:"none",stroke:"#000"};if(x){A.path=x;}AA.isAbsolute=true;AA.type="path";AA.path=[];AA.Path=Q;f.setFillAndStroke(AA,A);e.canvas.appendChild(AB);return AA;},createRectangle:function(AB,z,AC,e,A){var AE=this;var AF=B.rectPath(AB,z,AC,e,A);var AA=AE.path(AF);var AD=AA.attrs;AA.X=AD.x=AB;AA.Y=AD.y=z;AA.W=AD.width=AC;AA.H=AD.height=e;AD.r=A;AD.path=AF;AA.type="rect";return AA;},createText:function(AE,AD,AI){var AG=this;var AF=B.CREATE_ELEMENT("group");var AA=B.CREATE_ELEMENT("shape");var AB=AA.style;var AJ=B.CREATE_ELEMENT("path");var A=AJ.style;var AC=B.CREATE_ELEMENT("textpath");var z=m(AG.get("width"));var AH=m(AG.get("height"));AF.style.cssText=S.substitute(t,[AH,z]);AF.coordsize=k;AF.coordorigin=AG.coordorigin;AJ.v=S.substitute("m{0},{1}l{2},{1}",[X(AE*10),X(AD*10),X(AE*10)+1]);AJ.textpathok=true;AB.width=z;AB.height=AH;AC.string=String(AI);AC.on=true;AA.appendChild(AC);AA.appendChild(AJ);AF.appendChild(AA);var e=new K(AC,AF,AG);e.shape=AA;e.textpath=AJ;e.type="text";e.attrs.text=AI;e.attrs.x=AE;e.attrs.y=AD;e.attrs.w=1;e.attrs.h=1;f.setFillAndStroke(e,{font:R.font,stroke:"none",fill:"#000"});e.setBox();AG.canvas.appendChild(AF);return e;},remove:function(){var A=this;A.canvas.parentNode.removeChild(A.canvas);for(var e in A){if(T.hasOwnProperty(e)){A[e]=B.removed(e);}}return true;},setFillAndStroke:function(AE,AN){AE.attrs=AE.attrs||{};var AK=AE.node;var AO=AE.attrs;var AA=AK.style;var AB;var AM=(AN.x!=AO.x||AN.y!=AO.y||AN.width!=AO.width||AN.height!=AO.height||AN.r!=AO.r)&&AE.type=="rect";
var AS=AE;for(var AF in AN){if(AN.hasOwnProperty(AF)){AO[AF]=AN[AF];}}if(AM){AO.path=B.rectPath(AO.x,AO.y,AO.width,AO.height,AO.r);AE.X=AO.x;AE.Y=AO.y;AE.W=AO.width;AE.H=AO.height;}if(AN.href){AK.href=AN.href;}if(AN.title){AK.title=AN.title;}if(AN.target){AK.target=AN.target;}if(AN.cursor){AA.cursor=AN.cursor;}if("blur" in AN){AE.blur(AN.blur);}if(AN.path&&AE.type=="path"||AM){AK.path=B.path2vml(AO.path);}if(AN.rotation!=null){AE.rotate(AN.rotation,true);}if(AN.translation){AB=String(AN.translation).split(u);B.translate.call(AE,AB[0],AB[1]);if(AE._.rt.cx!=null){AE._.rt.cx+=+AB[0];AE._.rt.cy+=+AB[1];AE.setBox(AE.attrs,AB[0],AB[1]);}}if(AN.scale){AB=String(AN.scale).split(u);AE.scale(+AB[0]||1,+AB[1]||+AB[0]||1,+AB[2]||null,+AB[3]||null);}if("clip-rect" in AN){var A=String(AN["clip-rect"]).split(u);if(A.length==4){A[2]=+A[2]+(+A[0]);A[3]=+A[3]+(+A[1]);var AG=AK.clipRect||c.createElement("div");var AR=AG.style;var AD=AK.parentNode;AR.clip=S.substitute("rect({1}px {2}px {3}px {0}px)",A);if(!AK.clipRect){AR.position="absolute";AR.top=0;AR.left=0;AR.width=AE.paper.get("width")+"px";AR.height=AE.paper.get("height")+"px";AD.parentNode.insertBefore(AG,AD);AG.appendChild(AD);AK.clipRect=AG;}}if(!AN["clip-rect"]&&AK.clipRect){AK.clipRect.style.clip=Q;}}if(AE.type=="image"&&AN.src){AK.src=AN.src;}if(AE.type=="image"&&AN.opacity){AK.filterOpacity=s+".Alpha(opacity="+(AN.opacity*100)+")";AA.filter=(AK.filterMatrix||Q)+(AK.filterOpacity||Q);}if(AN.font){AA.font=AN.font;}if(AN["font-family"]){AA.fontFamily='"'+AN["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,Q)+'"';}if(AN["font-size"]){AA.fontSize=AN["font-size"];}if(AN["font-weight"]){AA.fontWeight=AN["font-weight"];}if(AN["font-style"]){AA.fontStyle=AN["font-style"];}if(AN.opacity!=null||AN["stroke-width"]!=null||AN.fill!=null||AN.stroke!=null||AN["stroke-width"]!=null||AN["stroke-opacity"]!=null||AN["fill-opacity"]!=null||AN["stroke-dasharray"]!=null||AN["stroke-miterlimit"]!=null||AN["stroke-linejoin"]!=null||AN["stroke-linecap"]!=null){AK=AE.shape||AK;var AL=(AK.getElementsByTagName(g)&&AK.getElementsByTagName(g)[0]);var AP=false;var x;if(!AL){AP=AL=B.CREATE_ELEMENT(g);}if("fill-opacity" in AN||"opacity" in AN){x=((+AO["fill-opacity"]+1||2)-1)*((+AO.opacity+1||2)-1)*((+b.getRGB(AN.fill).o+1||2)-1);if(x<0){x=0;}else{if(x>1){x=1;}}AL.opacity=x;}if(AN.fill){AL.on=true;}if(AL.on==null||AN.fill=="none"){AL.on=false;}if(AL.on&&AN.fill){var z=AN.fill.match(h);if(z){AL.src=z[1];AL.type="tile";}else{var y=b.getRGB(AN.fill);AL.color=y.hex;AL.src=Q;AL.type="solid";if(y.error&&(AS.type in W||String(AN.fill).charAt(0)!="r")&&f.addGradientFill(AS,AN.fill)){AO.fill="none";AO.gradient=AN.fill;}}}if(AP){AK.appendChild(AL);}var AC=(AK.getElementsByTagName("stroke")&&AK.getElementsByTagName("stroke")[0]);var AQ=false;if(!AC){AQ=AC=B.CREATE_ELEMENT("stroke");}if((AN.stroke&&AN.stroke!="none")||AN["stroke-width"]||AN["stroke-opacity"]!=null||AN["stroke-dasharray"]||AN["stroke-miterlimit"]||AN["stroke-linejoin"]||AN["stroke-linecap"]){AC.on=true;}if(AN.stroke=="none"||AC.on==null||AN.stroke==0||AN["stroke-width"]==0){AC.on=false;}var AJ=b.getRGB(AN.stroke);if(AC.on&&AN.stroke){AC.color=AJ.hex;}x=((+AO["stroke-opacity"]+1||2)-1)*((+AO.opacity+1||2)-1)*((+AJ.o+1||2)-1);var AI=(parseFloat(AN["stroke-width"])||1)*0.75;if(x<0){x=0;}else{if(x>1){x=1;}}if(AN["stroke-width"]==null){AI=AO["stroke-width"];}if(AN["stroke-width"]){AC.weight=AI;}if(AI&&AI<1&&(x*=AI)){AC.weight=1;}AC.opacity=x;if(AN["stroke-linejoin"]){AC.joinstyle=AN["stroke-linejoin"]||"miter";}AC.miterlimit=AN["stroke-miterlimit"]||8;var e=AN["stroke-linecap"];if(e){AC.endcap="round";if(e=="butt"){AC.endcap="flat";}else{if(e=="square"){AC.endcap=e;}}}var AH=AN["stroke-dasharray"];if(AH){AC.dashstyle=Q;if(N.hasOwnProperty(AH)){AC.dashstyle=N[AN["stroke-dasharray"]];}}if(AQ){AK.appendChild(AC);}}if(AS.type=="text"){AA=AS.paper.span.style;if(AO.font){AA.font=AO.font;}if(AO["font-family"]){AA.fontFamily=AO["font-family"];}if(AO["font-size"]){AA.fontSize=AO["font-size"];}if(AO["font-weight"]){AA.fontWeight=AO["font-weight"];}if(AO["font-style"]){AA.fontStyle=AO["font-style"];}if(AS.node.string){AS.paper.span.innerHTML=String(AS.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>");}AS.W=AO.w=AS.paper.span.offsetWidth;AS.H=AO.h=AS.paper.span.offsetHeight;AS.X=AO.x;AS.Y=AO.y+X(AS.H/2);switch(AO["text-anchor"]){case"start":AS.node.style["v-text-align"]="left";AS.bbx=X(AS.W/2);break;case"end":AS.node.style["v-text-align"]="right";AS.bbx=-X(AS.W/2);break;default:AS.node.style["v-text-align"]="center";break;}}}};U.createElement=function(x,y,e){var A=this;A[0]=x;A.id=S.guid();A.node=x;A.X=0;A.Y=0;A.attrs={};A.Group=y;A.paper=e;A._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};if(!e.bottom){e.bottom=A;}A.prev=e.top;if(e.top){e.top.next=A;}e.top=A;A.next=null;};U.rotate=function(e,A,x){if(this.removed){return this;}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(H);}return this._.rt.deg;}e=String(e).split(u);if(e.length-1){A=parseFloat(e[1]);x=parseFloat(e[2]);}e=parseFloat(e[0]);if(A!=null){this._.rt.deg=e;}else{this._.rt.deg+=e;}if(x==null){A=null;}this._.rt.cx=A;this._.rt.cy=x;this.setBox(this.attrs,A,x);this.Group.style.rotation=this._.rt.deg;return this;};U.setBox=function(AA,AB,z){if(this.removed){return this;}var A=this.Group.style;var AC=(this.shape&&this.shape.style)||this.node.style;AA=AA||{};for(var AD in AA){if(AA.hasOwnProperty(AD)){this.attrs[AD]=AA[AD];}}AB=AB||this._.rt.cx;z=z||this._.rt.cy;var AH=this.attrs;var AK;var AJ;var AM;var AF;switch(this.type){case"circle":AK=AH.cx-AH.r;AJ=AH.cy-AH.r;AM=AF=AH.r*2;break;case"ellipse":AK=AH.cx-AH.rx;AJ=AH.cy-AH.ry;AM=AH.rx*2;AF=AH.ry*2;break;case"image":AK=+AH.x;AJ=+AH.y;AM=AH.width||0;AF=AH.height||0;break;case"text":this.textpath.v=["m",X(AH.x),", ",X(AH.y-2),"l",X(AH.x)+1,", ",X(AH.y-2)].join(Q);AK=AH.x-X(this.W/2);AJ=AH.y-this.H/2;AM=this.W;AF=this.H;break;case"rect":case"path":if(!this.attrs.path){AK=0;AJ=0;AM=this.paper.get("width");
AF=this.paper.get("height");}else{var AE=B.pathDimensions(this.attrs.path);AK=AE.x;AJ=AE.y;AM=AE.width;AF=AE.height;}break;default:AK=0;AJ=0;AM=this.paper.get("width");AF=this.paper.get("height");break;}AB=(AB==null)?AK+AM/2:AB;z=(z==null)?AJ+AF/2:z;var AG=this.paper.get("width");var AL=this.paper.get("height");var e=AB-AG/2;var AI=z-AL/2;var AN;if(A.left!=(AN=e+"px")){A.left=AN;}if(A.top!=(AN=AI+"px")){A.top=AN;}this.X=i.hasOwnProperty(this.type)?-e:AK;this.Y=i.hasOwnProperty(this.type)?-AI:AJ;this.W=AM;this.H=AF;if(i.hasOwnProperty(this.type)){if(AC.left!=(AN=-e*I+"px")){AC.left=AN;}if(AC.top!=(AN=-AI*I+"px")){AC.top=AN;}}else{if(this.type=="text"){if(AC.left!=(AN=-e+"px")){AC.left=AN;}if(AC.top!=(AN=-AI+"px")){AC.top=AN;}}else{if(A.width!=(AN=AG+"px")){A.width=AN;}if(A.height!=(AN=AL+"px")){A.height=AN;}if(AC.left!=(AN=AK-e+"px")){AC.left=AN;}if(AC.top!=(AN=AJ-AI+"px")){AC.top=AN;}if(AC.width!=(AN=AM+"px")){AC.width=AN;}if(AC.height!=(AN=AF+"px")){AC.height=AN;}}}};U.hide=function(){if(!this.removed){this.Group.style.display="none";}return this;};U.show=function(){if(!this.removed){this.Group.style.display="block";}return this;};U.getRegion=function(){if(this.removed){return this;}if(i.hasOwnProperty(this.type)){return B.pathDimensions(this.attrs.path);}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H};};U.remove=function(){if(this.removed){return;}B.tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);if(this.shape){this.shape.parentNode.removeChild(this.shape);}for(var A in this){delete this[A];}this.removed=true;};U.attr=function(x,AB){var A=this;if(A.removed){return A;}var z;if(x==null){var y={};for(z in A.attrs){if(A.attrs.hasOwnProperty(z)){y[z]=A.attrs[z];}}if(A._.rt.deg){y.rotation=A.rotate();}if(A._.sx!=1||A._.sy!=1){y.scale=A.scale();}if(y.gradient&&y.fill=="none"){y.fill=y.gradient;delete y.gradient;}return y;}if(AB==null&&L(x)){if(x=="translation"){return B.translate.call(A);}if(x=="rotation"){return A.rotate();}if(x=="scale"){return A.scale();}if(x==g&&A.attrs.fill=="none"&&A.attrs.gradient){return A.attrs.gradient;}return A.attrs[x];}if(A.attrs&&AB==null&&Z(x)){var AA;var e={};for(z=0,AA=x.length;z<AA;z++){e[x[z]]=A.attr(x[z]);}return e;}var AC=B.applyAttributes(A,x,AB);if(AC){if(AC.text&&A.type=="text"){A.node.string=AC.text;}f.setFillAndStroke(A,AC);if(AC.gradient&&((W).hasOwnProperty(A.type)||String(AC.gradient).charAt(0)!="r")){f.addGradientFill(A,AC.gradient);}if(!i.hasOwnProperty(A.type)||A._.rt.deg){A.setBox(A.attrs);}}return A;};U.toFront=function(){if(!this.removed){this.Group.parentNode.appendChild(this.Group);}if(this.paper.top!=this){B.toFront(this,this.paper);}return this;};U.toBack=function(){if(this.removed){return this;}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);B.toBack(this,this.paper);}return this;};U.insertAfter=function(A){if(this.removed){return this;}if(A instanceof G.Set){A=A.item(A.size());}if(A.Group.nextSibling){A.Group.parentNode.insertBefore(this.Group,A.Group.nextSibling);}else{A.Group.parentNode.appendChild(this.Group);}B.insertAfter(this,A,this.paper);return this;};U.insertBefore=function(A){if(this.removed){return this;}if(A instanceof G.Set){A=A.item(0);}A.Group.parentNode.insertBefore(this.Group,A.Group);B.insertBefore(this,A,this.paper);return this;};U.blur=function(A){var e=this.node.runtimeStyle;var x=e.filter;x=x.replace(D,Q);if(+A!==0){this.attrs.blur=A;e.filter=x+H+s+".Blur(pixelradius="+(+A||1.5)+")";e.margin=S.substitute("-{0}px 0 0 -{0}px",[X(+A||1.5)]);}else{e.filter=x;e.margin=0;delete this.attrs.blur;}};T._SYNC_UI_ATTRS=T._SYNC_UI_ATTRS.join(",").replace(/,(height|width)/g,"").split(",");T._uiSetWidth=function(y){var x=this;G.superclass._uiSetWidth.apply(x,arguments);var e=x.canvas.style;var A=x.get("height");if(v(y)){y+="px";}if(v(A)){A+="px";}e.width=y;e.clip="rect(0 "+y+" "+A+" 0)";};T._uiSetHeight=function(y){var e=this;G.superclass._uiSetHeight.apply(e,arguments);var A=e.canvas.style;var x=e.get("width");if(v(y)){y+="px";}if(v(x)){x+="px";}A.height=y;A.clip="rect(0 "+x+" "+y+" 0)";};},"1.0.1",{requires:["aui-drawing-base","substitute"]});AUI.add("aui-drawing-animate",function(P){var F=P.Lang,B=F.isFunction,M=F.isString,e=P.ColorUtil,N=P.Drawing,S=N.Element,Y=N.Set,H=N.Util,E=S.prototype,O=N.MAP_ATTRS_AVAILABLE,L=Math,T=L.abs,a=L.max,W=L.min,I=L.pow,Q=L.round,d=/^(from|to|\d+%)$/,Z=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,J=N.REGEX_SEPARATOR,R=N.STR_EMPTY,C=N.STR_SPACE,G="number",K={along:"along",blur:G,"clip-rect":"csv",cx:G,cy:G,fill:"color","fill-opacity":G,"font-size":G,height:G,opacity:G,path:"path",r:G,rotation:"csv",rx:G,ry:G,scale:"csv",stroke:"color","stroke-opacity":G,"stroke-width":G,translation:"csv",width:G,x:G,y:G};var c=N.Animation={};c.easing_formulas={linear:function(A){return A;},"<":function(A){return I(A,3);},">":function(A){return I(A-1,3)+1;},"<>":function(A){A=A*2;if(A<1){return I(A,3)/2;}A-=2;return(I(A,3)+2)/2;},backIn:function(f){var A=1.70158;return f*f*((A+1)*f-A);},backOut:function(f){f=f-1;var A=1.70158;return f*f*((A+1)*f+A)+1;},elastic:function(g){if(g==0||g==1){return g;}var f=0.3;var A=f/4;return I(2,-10*g)*L.sin((g-A)*(2*L.PI)/f)+1;},bounce:function(h){var f=7.5625;var g=2.75;var A;if(h<(1/g)){A=f*h*h;}else{if(h<(2/g)){h-=(1.5/g);A=f*h*h+0.75;}else{if(h<(2.5/g)){h-=(2.25/g);A=f*h*h+0.9375;}else{h-=(2.625/g);A=f*h*h+0.984375;}}}return A;}};var X=[];c.elements=X;c.animation=function(){var o=+new Date;for(var AB=0;AB<X.length;AB++){if(AB!="length"&&X.hasOwnProperty(AB)){var AG=X[AB];if(AG.stop||AG.el.removed){continue;}var k=o-AG.start;var w=AG.ms;var v=AG.easing;var AC=AG.from;var s=AG.diff;var f=AG.to;var r=AG.t;var n=AG.el;var u={};var A;if(k<w){var h=v(k/w);for(var z in AC){if(AC.hasOwnProperty(z)){switch(K[z]){case"along":A=h*w*s[z];f.back&&(A=f.len-A);var AA=getPointAtLength(f[z],A);n.translate(s.sx-s.x||0,s.sy-s.y||0);
s.x=AA.x;s.y=AA.y;n.translate(AA.x-s.sx,AA.y-s.sy);f.rot&&n.rotate(s.r+AA.alpha,AA.x,AA.y);break;case G:A=+AC[z]+h*w*s[z];break;case"color":A="rgb("+[b(Q(AC[z].r+h*w*s[z].r)),b(Q(AC[z].g+h*w*s[z].g)),b(Q(AC[z].b+h*w*s[z].b))].join(",")+")";break;case"path":A=[];for(var AE=0,g=AC[z].length;AE<g;AE++){A[AE]=[AC[z][AE][0]];for(var AD=1,AF=AC[z][AE].length;AD<AF;AD++){A[AE][AD]=+AC[z][AE][AD]+h*w*s[z][AE][AD];}A[AE]=A[AE].join(C);}A=A.join(C);break;case"csv":switch(z){case"translation":var q=h*w*s[z][0]-r.x;var p=h*w*s[z][1]-r.y;r.x+=q;r.y+=p;A=q+C+p;break;case"rotation":A=+AC[z][0]+h*w*s[z][0];AC[z][1]&&(A+=","+AC[z][1]+","+AC[z][2]);break;case"scale":A=[+AC[z][0]+h*w*s[z][0],+AC[z][1]+h*w*s[z][1],(2 in f[z]?f[z][2]:R),(3 in f[z]?f[z][3]:R)].join(C);break;case"clip-rect":A=[];AE=4;while(AE--){A[AE]=+AC[z][AE]+h*w*s[z][AE];}break;}break;default:var m=[].concat(AC[z]);var A=[];AE=n.paper.customAttributes[z].length;while(AE--){A[AE]=+AC[AE]+h*w*s[z][AE];}break;}u[z]=A;}}n.attr(u);n._run&&n._run.call(n);}else{if(f.along){AA=getPointAtLength(f.along,f.len*!f.back);n.translate(s.sx-(s.x||0)+AA.x-s.sx,s.sy-(s.y||0)+AA.y-s.sy);f.rot&&n.rotate(s.r+AA.alpha,AA.x,AA.y);}if(r.x||r.y){n.translate(-r.x,-r.y);}if(f.scale){f.scale+=R;}n.attr(f);X.splice(AB--,1);}}}if(P.UA.svg&&n&&n.paper){n.paper.safari();}if(X.length){setTimeout(c.animation);}};var V=function(f,A){return f.key-A.key;};var U=function(A,f,j,g,h){var i=j-g;f.timeouts.push(setTimeout(function(){if(B(h)){h.call(f);}f.animate(A,i,A.easing);},g));};var b=function(A){return a(W(A,255),0);};function D(r,h,f,q,p,l){var m=3*h;var o=3*(q-h)-m;var A=1-m-o;var k=3*f;var n=3*(p-f)-k;var s=1-k-n;function j(u){return((A*u+o)*u+m)*u;}function g(u,w){var v=i(u,w);return((s*v+n)*v+k)*v;}function i(t,AB){var AA,z,w,u,y,v;for(w=t,v=0;v<8;v++){u=j(w)-t;if(T(u)<AB){return w;}y=(3*A*w+2*o)*w+m;if(T(y)<0.000001){break;}w=w-u/y;}AA=0;z=1;w=t;if(w<AA){return AA;}if(w>z){return z;}while(AA<z){u=j(w);if(T(u-t)<AB){return w;}if(t>u){AA=w;}else{z=w;}w=(z-AA)/2+AA;}return w;}return g(r,1/(200*l));}E.animateWith=function(g,j,A,l,k){for(var f=0,h=X.length;f<h;f++){if(X[f].el.id==g.id){j.start=X[f].start;}}return this.animate(j,A,l,k);};c.along=function(A){return function(h,g,f,j){var i={back:A};B(f)?(j=f):(i.rot=f);h&&h.constructor==S&&(h=h.attrs.path);h&&(i.along=h);return this.animate(i,g,j);};};E.animateAlong=c.along();E.animateAlongBack=c.along(1);E.onAnimation=function(g){var A=this;A._run=g||0;return A;};E.animate=function(AI,y,x,l){var AH=this;AH.timeouts=AH.timeouts||[];if(B(x)||!x){l=x||null;}if(AH.removed){l&&l.call(AH);return AH;}var AC={};var f={};var q={};var p=false;var v=AH.paper.customAttributes;for(var z in AI){if(AI.hasOwnProperty(z)){if(K.hasOwnProperty(z)||v.hasOwnProperty(z)){p=true;AC[z]=AH.attr(z);if(AC[z]==null){AC[z]=O[z];}f[z]=AI[z];switch(K[z]){case"along":var AF=getTotalLength(AI[z]);var AA=getPointAtLength(AI[z],AF*!!AI.back);var m=AH.getRegion();q[z]=AF/y;q.tx=m.x;q.ty=m.y;q.sx=AA.x;q.sy=AA.y;f.rot=AI.rot;f.back=AI.back;f.len=AF;if(AI.rot){q.r=parseFloat(AH.rotate())||0;}break;case G:q[z]=(f[z]-AC[z])/y;break;case"color":AC[z]=e.getRGB(AC[z]);var AB=e.getRGB(f[z]);q[z]={r:(AB.r-AC[z].r)/y,g:(AB.g-AC[z].g)/y,b:(AB.b-AC[z].b)/y};break;case"path":var n=H.path2curve(AC[z],f[z]);AC[z]=n[0];var t=n[1];q[z]=[];for(var AE=0,h=AC[z].length;AE<h;AE++){q[z][AE]=[0];for(var AD=1,AG=AC[z][AE].length;AD<AG;AD++){q[z][AE][AD]=(t[AE][AD]-AC[z][AE][AD])/y;}}break;case"csv":var A=String(AI[z]).split(J);var o=String(AC[z]).split(J);switch(z){case"translation":AC[z]=[0,0];q[z]=[A[0]/y,A[1]/y];break;case"rotation":AC[z]=(o[1]==A[1]&&o[2]==A[2])?o:[0,A[1],A[2]];q[z]=[(A[0]-AC[z][0])/y,0,0];break;case"scale":AI[z]=A;AC[z]=String(AC[z]).split(J);q[z]=[(A[0]-AC[z][0])/y,(A[1]-AC[z][1])/y,0,0];break;case"clip-rect":AC[z]=String(AC[z]).split(J);q[z]=[];AE=4;while(AE--){q[z][AE]=(A[AE]-AC[z][AE])/y;}break;}f[z]=A;break;default:A=[].concat(AI[z]);o=[].concat(AC[z]);q[z]=[];AE=v[z].length;while(AE--){q[z][AE]=((A[AE]||0)-(o[AE]||0))/y;}break;}}}}if(!p){var w=[];var k;for(var AJ in AI){if(AI.hasOwnProperty(AJ)&&d.test(AJ)){z={value:AI[AJ]};if(AJ=="from"){AJ=0;}else{if(AJ=="to"){AJ=100;}}z.key=parseInt(AJ,10);w.push(z);}}w.sort(V);if(w[0].key){w.unshift({key:0,value:AH.attrs});}var u;var g=w.length;for(var AE=0;AE<g;AE++){z=w[AE];u=w[AE-1];U(z.value,AH,y/100*z.key,y/100*(u&&u.key||0),u&&u.value.callback);}k=w[g-1].value.callback;if(k){AH.timeouts.push(setTimeout(function(){k.call(AH);},y));}}else{var r=c.easing_formulas[x];if(!r){r=String(r).match(Z);if(r&&r.length==5){var s=r;r=function(i){return D(i,+s[1],+s[2],+s[3],+s[4],y);};}else{r=function(i){return i;};}}X.push({start:AI.start||+new Date,ms:y,easing:r,from:AC,diff:q,to:f,el:AH,t:{x:0,y:0}});if(B(l)){AH._ac=setTimeout(function(){l.call(AH);},y);}if(X.length==1){setTimeout(c.animation);}}return AH;};E.stop=function(){var A=this;for(var f=0;f<X.length;f++){if(X[f].el.id==A.id){X.splice(f--,1);}}A.timeouts=[];clearTimeout(A._ac);delete A._ac;return A;};E.translate=function(A,f){return this.attr({translation:A+" "+f});};Y.addMethod(["animateAlong","animateAlongBack","animateWith","onAnimation","stop","translate"]);Y.prototype.animate=function(g,A,k,o){var n=this;if(B(k)||!k){o=k||null;}var l=n._items;var f=l.length;var h=f;var p;var m;var j;if(o){j=function(){if(!--f){o.call(n);}};}k=M(k)?k:j;p=l[--h].animate(g,A,k,j);while(h--){m=l[h];if(m&&!m.removed){m.animateWith(p,g,A,k,j);}}return n;};},"1.0.1",{requires:["aui-drawing-base"]});AUI.add("aui-drawing-drag",function(C){var G=C.Lang,D=C.config.doc,E=C.Drawing,B=E.Element,I=B.prototype,F={standAlone:true},K={mousedown:"gesturemovestart",mousemove:"gesturemove",mouseup:"gesturemoveend"},H="createTouch" in D;var J=E.Drag={drags:[]};B._getEventType=function(A){return K[A]||A;};B._getEventConfig=function(A,L){return K[L]?F:null;};J.dragMove=function(P){var A=P.clientX;var R=P.clientY;var M;var O=J.drags;var L=O.length;while(L--){M=O[L];if(H){var N=P.touches.length;var Q;while(N--){Q=P.touches[N];
if(Q.identifier==M.el._drag.id){A=Q.clientX;R=Q.clientY;(P.originalEvent?P.originalEvent:P).preventDefault();break;}}}else{P.preventDefault();}if(M.move){M.move.call(M.el,A-M.el._drag.x,R-M.el._drag.y,A,R);}}};J.dragUp=function(){J._dragMoveHandle.detach();J._dragUpHandle.detach();var M=J.drags;var L=M.length;var A;while(L--){A=M[L];A.el._drag={};if(A.end){A.end.call(A.el);}}J.drags=[];};I.drag=function(L,N,M){var A=this;A._drag={};A.on("mousedown",function(R){var Q=this;(R.originalEvent||R).preventDefault();Q._drag.x=R.clientX;Q._drag.y=R.clientY;Q._drag.id=R.identifier;if(N){N.call(Q,R.clientX,R.clientY);}if(!J.drags.length){var O=B._getEventType("mousemove");var P=B._getEventType("mouseup");J._dragMoveHandle=C.on(O,J.dragMove,D,B._getEventConfig(O,"mousemove"));J._dragUpHandle=C.on(P,J.dragUp,D,B._getEventConfig(P,"mouseup"));}J.drags.push({el:this,move:L,end:M});});return A;};I.undrag=function(L,P,O){var A=this;var N=J.drags;var M=N.length;while(M--){N[M].el==A&&(N[M].move==L&&N[M].end==O)&&N.splice(M,1);if(!N.length){J._dragMoveHandle.detach();J._dragUpHandle.detach();}}};E.Set.addMethod(["drag","undrag"]);},"1.0.1",{requires:["aui-drawing-base","event-gestures"]});AUI.add("aui-drawing-fonts",function(E){var K=E.Lang,D=K.isString,H=E.Drawing,O=H.prototype,L=function(A){return F[A]||"M";},F={l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"},J={bold:700,bolder:800,lighter:300,normal:400},N=Math,G=N.max,C=N.min,B=/[mlcxtrv]/g,I=H.REGEX_SEPARATOR,M=H.STR_EMPTY;H.registerFont=function(P){if(!P.face){return P;}this.fonts=this.fonts||{};var Y=this.fonts;var W={w:P.w,face:{},glyphs:{}};var R=P.face["font-family"];var T=P.face;var V=W.face;for(var A in T){if(T.hasOwnProperty(A)){V[A]=T[A];}}if(Y[R]){Y[R].push(W);}else{Y[R]=[W];}if(!P.svg){V["units-per-em"]=parseInt(T["units-per-em"],10);for(var U in P.glyphs){if(P.glyphs.hasOwnProperty(U)){var X=P.glyphs[U];var S=X.d;if(S){S=S.replace(B,L);S="M"+S+"z";}W.glyphs[U]={w:X.w,k:{},d:S};if(X.k){for(var Q in X.k){if(X.hasOwnProperty(Q)){W.glyphs[U].k[Q]=X.k[Q];}}}}}}return P;};O.getFont=function(W,X,P,R){var Z=this;R=R||"normal";P=P||"normal";X=+X||J[X]||400;if(!H.fonts){return;}var a=H.fonts;var T=a[W];if(!T){var Q=new RegExp("(^|\\s)"+W.replace(/[^\w\d\s+!~.:_-]/g,M)+"(\\s|$)","i");for(var A in a){if(a.hasOwnProperty(A)){if(Q.test(A)){T=a[A];break;}}}}var U;if(T){var Y;for(var V=0,S=T.length;V<S;V++){U=T[V];Y=U.face;if(Y["font-weight"]==X&&(Y["font-style"]==P||!Y["font-style"])&&Y["font-stretch"]==R){break;}}}return U;};O.print=function(S,R,A,V,W,g,T){var e=this;g=g||"middle";T=G(C(T||0,1),-1);var b=e.createSet();var f=String(A).split(M);var c=0;var Z=M;var h;D(V)&&(V=e.getFont(V));if(V){h=(W||16)/V.face["units-per-em"];var Q=V.face.bbox.split(I);var U=+Q[0];var X=+Q[1]+(g=="baseline"?Q[3]-Q[1]+(+V.face.descent):(Q[3]-Q[1])/2);for(var a=0,P=f.length;a<P;a++){var Y=a&&V.glyphs[f[a-1]]||{};var d=V.glyphs[f[a]];c+=a?(Y.w||V.w)+(Y.k&&Y.k[f[a]]||0)+(V.w*T):0;d&&d.d&&b.push(e.path(d.d).attr({fill:"#000",stroke:"none",translation:[c,0]}));}b.scale(h,h,U,X).translate(S-U,R-X);}return b;};},"1.0.1",{requires:["aui-drawing-base"]});AUI.add("aui-drawing-safari",function(B){B.Drawing.prototype.safari=function(){var A=this;var C=A.rect(-99,-99,A.get("width")+99,A.get("height")+99).attr({stroke:"none"});setTimeout(function(){C.remove();},0);};},"1.0.1",{requires:["aui-drawing-base"]});AUI.add("aui-drawing",function(B){},"1.0.1",{plugins:{"aui-drawing-vml":{condition:{trigger:"aui-drawing-base",test:function(B){return B.UA.vml;}}},"aui-drawing-svg":{condition:{trigger:"aui-drawing-base",test:function(B){return B.UA.svg;}}},"aui-drawing-safari":{condition:{trigger:"aui-drawing-base",test:function(B){var C=B.UA;return C.safari&&(C.version.major<4||(C.iphone||C.ipad));}}}},skinnable:false,use:["aui-drawing-base","aui-drawing-animate","aui-drawing-drag","aui-drawing-fonts"]});