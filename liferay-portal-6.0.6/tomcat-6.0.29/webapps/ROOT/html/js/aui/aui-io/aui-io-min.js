AUI.add("aui-io-request",function(k){var e=k.Lang,m=e.isBoolean,l=e.isFunction,G=e.isString,C=YUI.AUI.namespace("defaults.io"),h=function(A){return function(){return C[A];};},s="active",b="arguments",u="autoLoad",n="cache",D="cfg",p="complete",c="content-type",v="context",j="data",J="dataType",g="",M="end",o="failure",a="form",q="get",i="headers",K="IORequest",d="json",t="method",r="responseData",w="start",E="success",y="sync",x="timeout",z="transaction",B="uri",H="xdr",N="xml",f="Parser error: IO dataType is not correctly parsing",I={all:"*/*",html:"text/html",json:"application/json, text/javascript",text:"text/plain",xml:"application/xml, text/xml"};var F=k.Component.create({NAME:K,ATTRS:{autoLoad:{value:true,validator:m},cache:{value:true,validator:m},dataType:{setter:function(A){return(A||g).toLowerCase();},value:null,validator:G},responseData:{setter:function(A){return this._setResponseData(A);},value:null},uri:{setter:function(A){return this._parseURL(A);},value:null,validator:G},active:{value:false,validator:m},cfg:{getter:function(){var A=this;return{arguments:A.get(b),context:A.get(v),data:A.get(j),form:A.get(a),headers:A.get(i),method:A.get(t),on:{complete:k.bind(A.fire,A,p),end:k.bind(A._end,A),failure:k.bind(A.fire,A,o),start:k.bind(A.fire,A,w),success:k.bind(A._success,A)},sync:A.get(y),timeout:A.get(x),xdr:A.get(H)};},readOnly:true},transaction:{value:null},arguments:{valueFn:h(b)},context:{valueFn:h(v)},data:{valueFn:h(j),setter:"_setIOData"},form:{valueFn:h(a)},headers:{getter:function(O){var P=[];var A=this;var L=A.get(J);if(L){P.push(I[L]);}P.push(I.all);return k.merge(O,{Accept:P.join(", ")});},valueFn:h(i)},method:{valueFn:h(t)},selector:{value:null},sync:{valueFn:h(y)},timeout:{valueFn:h(x)},xdr:{valueFn:h(H)}},EXTENDS:k.Plugin.Base,prototype:{init:function(L){var A=this;F.superclass.init.apply(this,arguments);A._autoStart();},destructor:function(){var A=this;A.stop();A.set(z,null);},start:function(){var A=this;A.destructor();A.set(s,true);var L=k.io(A.get(B),A.get(D));A.set(z,L);},stop:function(){var A=this;var L=A.get(z);if(L){L.abort();}},_autoStart:function(){var A=this;if(A.get(u)){A.start();}},_parseURL:function(Q){var A=this;var O=A.get(n);var S=A.get(t);if((O===false)&&(S==q)){var R=+new Date;var P=Q.replace(/(\?|&)_=.*?(&|$)/,"$1_="+R+"$2");Q=P+((P==Q)?(Q.match(/\?/)?"&":"?")+"_="+R:"");}var L=C.uriFormatter;if(l(L)){Q=L.apply(A,[Q]);}return Q;},_end:function(L){var A=this;A.set(s,false);A.set(z,null);A.fire(M,L);},_success:function(O,L){var A=this;A.set(r,L);A.fire(E,O,L);},_setIOData:function(O){var A=this;var L=C.dataFormatter;if(l(L)){O=L.call(A,O);}return O;},_setResponseData:function(T){var Q=null;var L=this;if(T){var O=L.get(J);var S=T.getResponseHeader(c);if((O==N)||(!O&&S.indexOf(N)>=0)){Q=T.responseXML;if(Q.documentElement.tagName=="parsererror"){throw f;}}else{Q=T.responseText;}if(Q===g){Q=null;}if(O==d){try{Q=k.JSON.parse(Q);}catch(R){}}else{var A=L.get("selector");if(Q&&A){var P;if(Q.documentElement){P=k.one(Q);}else{P=k.Node.create(Q);}Q=P.all(A);}}}return Q;}}});k.IORequest=F;k.io.request=function(L,A){return new k.IORequest(k.merge(A,{uri:L}));};},"1.0.1",{requires:["aui-base","io-base","json","plugin","querystring-stringify"]});AUI.add("aui-io-plugin",function(v){var k=v.Lang,d=k.isBoolean,c=k.isString,y=function(A){return(A instanceof v.Node);},w=v.WidgetStdMod,p="Node",j="Widget",E="",m="failure",l="failureMessage",z="host",g="icon",f="io",n="IOPlugin",x="loading",o="loadingMask",D="node",u="outer",C="parseContent",i="queue",b="rendered",e="section",s="showLoading",t="success",q="type",a="where",B=v.ClassNameManager.getClassName,h=B(g,x);var r=v.Component.create({NAME:n,NS:f,ATTRS:{node:{value:null,getter:function(H){var A=this;if(!H){var G=A.get(z);var F=A.get(q);if(F==p){H=G;}else{if(F==j){var I=A.get(e);if(!G.getStdModNode(I)){G.setStdModContent(I,E);}H=G.getStdModNode(I);}}}return v.one(H);},validator:y},failureMessage:{value:"Failed to retrieve content",validator:c},loadingMask:{value:{}},parseContent:{value:true,validator:d},showLoading:{value:true,validator:d},section:{value:w.BODY,validator:function(A){return(!A||A==w.BODY||A==w.HEADER||A==w.FOOTER);}},type:{readOnly:true,valueFn:function(){var A=this;var F=p;if(A.get(z) instanceof v.Widget){F=j;}return F;},validator:c},where:{value:w.REPLACE,validator:function(A){return(!A||A==w.AFTER||A==w.BEFORE||A==w.REPLACE||A==u);}}},EXTENDS:v.IORequest,prototype:{bindUI:function(){var A=this;A.on("activeChange",A._onActiveChange);A.on(t,A._successHandler);A.on(m,A._failureHandler);if((A.get(q)==j)&&A.get(s)){var F=A.get(z);F.after("heightChange",A._syncLoadingMaskUI,A);F.after("widthChange",A._syncLoadingMaskUI,A);}},_autoStart:function(){var A=this;A.bindUI();r.superclass._autoStart.apply(this,arguments);},_bindParseContent:function(){var A=this;var F=A.get(D);if(F&&!F.ParseContent&&A.get(C)){F.plug(v.Plugin.ParseContent);}},hideLoading:function(){var A=this;var F=A.get(D);if(F.loadingmask){F.loadingmask.hide();}},setContent:function(F){var A=this;A._bindParseContent();A._getContentSetterByType().apply(A,[F]);if(A.overlayMaskBoundingBox){A.overlayMaskBoundingBox.remove();}},showLoading:function(){var A=this;var F=A.get(D);if(F.loadingmask){if(A.overlayMaskBoundingBox){F.append(A.overlayMaskBoundingBox);}}else{F.plug(v.LoadingMask,A.get(o));A.overlayMaskBoundingBox=F.loadingmask.overlayMask.get("boundingBox");}F.loadingmask.show();},start:function(){var A=this;var F=A.get(z);if(!F.get(b)){F.after("render",function(){A._setLoadingUI(true);});}r.superclass.start.apply(A,arguments);},_getContentSetterByType:function(){var A=this;var F={Node:function(J){var G=this;var I=G.get(D);if(J instanceof v.NodeList){J=J.toFrag();}if(J instanceof v.Node){J=J._node;}var H=G.get(a);if(H==u){I.replace(J);}else{I.insert(J,H);}},Widget:function(I){var G=this;var H=G.get(z);H.setStdModContent.apply(H,[G.get(e),I,G.get(a)]);}};return F[this.get(q)];},_setLoadingUI:function(F){var A=this;if(A.get(s)){if(F){A.showLoading();
}else{A.hideLoading();}}},_syncLoadingMaskUI:function(){var A=this;A.get(D).loadingmask.refreshMask();},_successHandler:function(F,H,G){var A=this;A.setContent(this.get("responseData"));},_failureHandler:function(F,H,G){var A=this;A.setContent(A.get(l));},_onActiveChange:function(H){var F=this;var G=F.get(z);var A=F.get(q)==j;if(!A||(A&&G&&G.get(b))){F._setLoadingUI(H.newVal);}}}});v.Node.prototype.load=function(J,I,K){var F=this;var H=J.indexOf(" ");var A;if(H>0){A=J.slice(H,J.length);J=J.slice(0,H);}if(k.isFunction(I)){K=I;I=null;}I=I||{};if(K){I.after=I.after||{};I.after.success=K;}var G=I.where;I.uri=J;I.where=G;if(A){I.selector=A;I.where=G||"replace";}F.plug(v.Plugin.IO,I);return F;};v.namespace("Plugin").IO=r;},"1.0.1",{requires:["aui-overlay-base","aui-parse-content","aui-io-request","aui-loading-mask"]});AUI.add("aui-io",function(a){},"1.0.1",{use:["aui-io-request","aui-io-plugin"],skinnable:false});